#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
文件名: force-recreate-files.py
版本号: 1.0.0
更新日期: 2025-11-27
功能: 强制重新创建指定目录下的Markdown文件，使用正确的UTF-8编码
"""

import os

def recreate_file(file_path):
    """
    根据文件名重新创建文件
    :param file_path: 文件路径
    :return: None
    """
    filename = os.path.basename(file_path)
    print(f"重新创建文件: {file_path}")
    
    # 根据文件名生成基本内容
    if filename == "01-项目简介.md":
        content = '''<!--
文件名: 01-项目简介.md
版本号: 1.0.0
更新日期: 2025-11-24
作者: Sut
描述: 项目介绍文档，介绍SutWxApp微信小程序的项目目标、功能特点和技术架构
-->
# SutWxApp 微信小程序项目简介
**版本号：1.0.0**
*最后更新时间：2025年11月24日*

## 项目介绍

SutWxApp 是一个基于微信小程序平台开发的电商应用，旨在为用户提供便捷的在线购物、积分管理和社交互动功能。该项目结合了现代化的前端开发技术与后端服务，为用户提供流畅的移动端购物体验。
## 项目目标

- 构建功能完善的微信小程序电商平台
- 提供优质的用户体验和界面设计
- 实现积分系统和社交互动功能
- 确保系统稳定性和性能优化
- 支持多语言本地化
## 主要功能模块

### 1. 商品管理
- 商品分类浏览
- 商品搜索功能
- 商品详情展示
- 商品收藏功能
- 相关商品推荐

### 2. 购物车管理
- 添加/删除购物车商品
- 修改购物车商品数量
- 购物车商品结算
- 商品选择与全选功能
### 3. 订单管理
- 订单创建和支付
- 订单状态跟踪
- 历史订单查询
- 订单评价功能
- 物流信息查询

### 4. 用户中心
- 用户注册与登录
- 个人信息管理
- 地址管理
- 用户评价管理
- 隐私设置

### 5. 积分系统
- 积分获取规则
- 积分任务完成
- 积分兑换功能
- 积分商城
- 积分发放系统
- 积分兑换记录

### 6. 社交功能
- 商品评价
- 用户关注
- 分享功能
- 邀请与关注机制
### 7. 通知系统
- 系统通知
- 订单通知
- 活动通知

### 8. 支付系统
- 微信支付集成
- 订单支付状态管理
## 技术特点
- 使用微信小程序原生开发框架
- 采用组件化开发方式
- 实现国际化和本地化支持
- 集成第三方服务功能
- 应用缓存优化提升性能
- 图片懒加载优化用户体验
## 项目团队

- **项目名称**: Sut微信小程序 (SutWxApp)
- **项目仓库**: https://github.com/sutchan
- **默认署名**: Sut
- **开发环境**: Windows

## 开发原则
- 以用户体验为中心
- 代码质量和可维护性优先
- 持续优化和改进
- 遵循微信小程序开发规范
- 注重性能和安全
## 文档导航

- [01-项目简介](./01-项目简介.md): 项目背景、目标、功能定位和愿景。
- [02-目录结构](./02-目录结构.md): 项目文件组织方式和各目录用途。
- [03-技术栈](./03-技术栈.md): 项目使用的主要技术框架和工具。
## 版本历史

| 版本号 | 更新日期 | 更新内容 |
|--------|----------|----------|
| 1.0.0  | 2025-11-24 | 统一文档格式，规范版本号，更新文档头部信息 |
| 1.0.16 | 2024-11-01 | 修正语法错误，更新API接口文档和开发者指南 |
| 1.0.15 | 2023-10-25 | 优化积分系统功能，新增积分商城 |
| 1.0.14 | 2023-10-10 | 完善订单管理功能，增加物流跟踪 |
| 1.0.13 | 2023-09-28 | 优化商品搜索功能，提升查询性能 |
| 1.0.12 | 2023-09-15 | 新增社交功能模块，支持用户关注和分享 |
| 1.0.11 | 2023-09-01 | 完善支付系统，支持多种支付方式 |
| 1.0.10 | 2023-08-20 | 优化用户界面，提升用户体验 |
| 1.0.9  | 2023-08-05 | 修复已知问题，提升系统稳定性 |
| 1.0.8  | 2023-07-20 | 新增积分发放系统 |
| 1.0.7  | 2023-07-05 | 优化购物车功能，支持批量操作 |
| 1.0.6  | 2023-06-20 | 完善用户中心功能 |
| 1.0.5  | 2023-06-05 | 新增商品收藏功能 |
| 1.0.4  | 2023-05-20 | 优化订单管理功能 |
| 1.0.3  | 2023-05-05 | 完善商品分类和搜索功能 |
| 1.0.2  | 2023-04-20 | 修复已知问题，提升性能 |
| 1.0.1  | 2023-04-05 | 初始版本发布 |
'''
    elif filename == "02-目录结构.md":
        content = '''<!--
文件名: 02-目录结构.md
版本号: 1.0.0
更新日期: 2025-11-24
作者: Sut
描述: 项目目录结构说明文档，详细介绍SutWxApp微信小程序的文件组织和各目录功能
-->
# SutWxApp 微信小程序目录结构
**版本**: 1.0.0  
**最后更新**: 2025年11月24日
## 项目整体结构

```
SutWxApp/
├── .eslintrc.js        # ESLint配置文件
├── .github/            # GitHub配置文件
├── .gitignore          # Git忽略文件配置
├── .prettierrc.js      # Prettier配置文件
├── app.js              # 小程序入口文件
├── app.json            # 全局配置
├── app.wxss            # 全局样式
├── assets/             # 静态资源
├── components/         # 自定义组件
├── docs/               # 项目文档
├── images/             # 图片文件
├── locales/            # 多语言支持文件
├── package.json        # 项目依赖配置
├── pages/              # 页面文件
├── project.config.json # 微信开发者工具项目配置
├── services/           # 服务层
├── sitemap.json        # 小程序sitemap配置
└── utils/              # 工具类
```

## 主要目录说明

### 1. 根目录文件
- **app.js**: 小程序入口文件，负责全局初始化、生命周期管理和全局数据维护
- **app.json**: 小程序全局配置文件，定义页面路由、窗口样式、导航栏等
- **app.wxss**: 全局样式文件，定义应用的基础样式
- **.eslintrc.js**: ESLint配置文件，规范代码质量和风格
- **.prettierrc.js**: Prettier配置文件，统一代码格式化标准
- **project.config.json**: 微信开发者工具项目配置文件
- **sitemap.json**: 小程序sitemap配置，用于SEO优化

### 2. assets/ 目录

存放静态资源文件，主要包括图片等媒体资源。
### 3. components/ 目录

存放自定义组件，采用组件化开发方式，提高代码复用率和可维护性。
### 4. pages/ 目录

存放小程序所有页面文件，每个子目录代表一个功能模块的页面集合。
### 5. services/ 目录

服务层，封装API调用和业务逻辑，提供统一的数据服务接口。
### 6. utils/ 目录

工具类目录，包含各种通用工具函数和服务，如用户服务、订单服务、支付服务等。
### 7. locales/ 目录

多语言支持文件目录，存放不同语言的翻译内容。
### 8. images/ 目录

图片资源目录，存放小程序中使用的图片文件。
### 9. docs/ 目录

项目文档目录，存放项目相关的说明文档。
## 文件命名规范

### 1. 文件命名原则

- 页面文件：使用小驼峰命名法，如 `userInfo.js`
- 组件文件：使用小驼峰命名法，如 `lazyImage.js`
- 服务文件：使用小驼峰命名法，如 `userService.js`
- 测试文件：使用小驼峰命名法，后缀为 `.test.js`，如 `userService.test.js`

### 2. 目录命名原则

- 使用全小写字母
- 单词间使用连字符 `-` 分隔
- 目录名应清晰表达其功能
## 目录结构设计理念

### 1. 模块化设计
采用模块化设计思想，将不同功能的代码组织到不同的目录中，提高代码的可维护性和可扩展性。
### 2. 关注点分离
将UI渲染、业务逻辑、数据处理等关注点分离，使代码结构更清晰，易于维护和测试。
### 3. 可复用性优先
通过组件化和工具类设计，提高代码的可复用性，减少重复代码。
### 4. 测试友好

目录结构设计考虑测试需求，便于编写单元测试和集成测试。
## 版本历史

| 版本号 | 更新日期 | 更新内容 |
|-------|---------|--------|
| 1.0.0  | 2025-11-24 | 统一文档格式，规范版本号，更新文档头部信息 |
| 1.0.1  | 2024-08-15 | 调整项目结构，优化文件组织 |
| 1.0.2  | 2024-08-16 | 新增组件目录结构说明 |
| 1.0.3  | 2024-08-17 | 更新服务层目录结构 |
| 1.0.4  | 2024-08-18 | 优化工具类目录说明 |
| 1.0.5  | 2024-08-19 | 调整页面目录结构 |
| 1.0.6  | 2024-08-20 | 新增国际化支持目录 |
| 1.0.7  | 2024-08-21 | 优化文档格式 |
| 1.0.8  | 2024-08-22 | 更新目录命名规范 |
| 1.0.9  | 2024-08-23 | 新增测试文件目录说明 |
| 1.0.10 | 2024-08-24 | 优化服务层结构 |
| 1.0.11 | 2024-08-25 | 调整工具类命名规则 |
| 1.0.12 | 2024-08-26 | 新增CI/CD配置目录 |
| 1.0.13 | 2024-08-27 | 更新文档结构 |
| 1.0.14 | 2024-08-28 | 优化版本历史格式 |
| 1.0.15 | 2024-08-29 | 新增目录设计理念说明 |
| 1.0.16 | 2024-11-01 | 更新文档格式规范 |
'''
    elif filename == "03-技术栈.md":
        content = '''<!--
文件名: 03-技术栈.md
版本号: 1.0.0
更新日期: 2025-11-24
作者: Sut
描述: 项目技术栈说明文档，列出SutWxApp微信小程序所使用的前后端技术和第三方服务
-->
# SutWxApp 微信小程序技术栈

**版本**: 1.0.0  
**最后更新**: 2025年11月24日
## 前端开发技术
### 1. 微信小程序原生框架
- **WXML (WeiXin Markup Language)**: 微信小程序的标记语言，类似HTML
- **WXSS (WeiXin Style Sheet)**: 微信小程序的样式语言，扩展了CSS功能
- **JavaScript**: 小程序的脚本语言，处理页面逻辑
- **JSON**: 用于配置页面和组件
### 2. 开发语言与规范
- **JavaScript**: 主要开发语言
- **ES6+**: 使用现代JavaScript语法
- **模块化编程**: 采用CommonJS模块规范
- **组件化开发**: 自定义组件封装和复用

### 3. 项目架构

- **MVVM架构模式**: 采用数据驱动视图的开发模式
- **分层设计**: 页面层(Pages)、服务层(Services)、工具层(Utils)分离
- **组件化架构**: 自定义组件实现UI复用

## 功能模块技术
### 1. 网络请求

- **wx.request API**: 微信小程序内置的网络请求接口
- **Promise封装**: 基于Promise封装网络请求，简化异步操作
- **请求拦截器**: 统一处理请求头、认证信息等

### 2. 数据管理

- **小程序原生数据绑定**: 响应式数据更新
- **缓存管理**: 使用本地缓存存储用户数据和配置信息
  - wx.setStorage/wx.getStorage: 持久化存储
  - wx.setStorageSync/wx.getStorageSync: 同步存储方式

### 3. 多语言支持

- **i18n国际化框架**: 自定义实现的国际化解决方案
- **PO文件格式**: 使用标准的PO文件管理翻译内容
- **动态语言切换**: 支持运行时切换语言

### 4. 图片处理

- **图片懒加载**: 自定义lazy-image组件实现图片懒加载
- **图片压缩**: 对上传图片进行压缩优化
- **SVG图标**: 使用SVG格式图标，支持缩放和颜色调整

### 5. 支付功能

- **微信支付API**: 集成微信支付功能
- **支付流程管理**: 完整的支付状态跟踪和错误处理

## 测试与质量保证
### 1. 测试框架

- **Jest**: JavaScript测试框架，用于单元测试
- **测试用例管理**: 按模块组织测试用例
- **Mock数据**: 模拟API响应数据进行测试

### 2. 代码质量

- **ESLint**: JavaScript代码检查工具
- **代码规范**: 统一的代码风格和命名规范
- **文档驱动开发**: 完善的文档和注释

## 开发工具与环境

### 1. 开发环境
- **Windows**: 主要开发操作系统
- **微信开发者工具**: 官方IDE，提供代码编辑、调试、预览等功能
- **VSCode**: 可选的代码编辑器，配合相关插件

### 2. 版本控制

- **Git**: 代码版本控制系统
- **GitHub**: 代码托管平台
- **分支管理**: 合理的分支策略
### 3. 文档工具

- **Markdown**: 文档编写格式
- **项目wiki**: 通过GitHub wiki管理项目文档

## 项目依赖与库

### 1. 核心依赖

- **微信小程序SDK**: 微信官方提供的开发工具包
- **Promise Polyfill**: 提供Promise支持
- **正则表达式工具**: 用于表单验证等功能
### 2. 工具库
- **日期处理**: 自定义日期格式化和计算
- **字符串处理**: 常用字符串操作方法
- **数字处理**: 金额、百分比等数字格式化
- **数组操作**: 数组处理和转换工具
### 3. 自定义服务
- **API服务**: 统一的API请求管理
- **认证服务**: 用户登录和权限管理
- **缓存服务**: 高效缓存策略实现
- **用户服务**: 用户信息和行为管理
## 性能优化技术
### 1. 前端性能

- **页面预加载**: 提前加载可能访问的页面
- **资源缓存**: 合理使用本地缓存减少网络请求
- **组件复用**: 减少重复渲染和创建
- **预加载与占位**: 首页内容预加载
### 2. 网络优化

- **请求合并**: 减少HTTP请求数量
- **数据压缩**: 请求和响应数据压缩
- **请求重试**: 网络错误自动重试机制
- **超时处理**: 合理的请求超时设置
### 3. 内存管理

- **及时清理**: 避免不必要的内存占用
- **对象池**: 复用对象减少GC压力
- **事件解绑**: 页面卸载时解绑事件监听器
## 安全技术
### 1. 数据安全

- **数据加密**: 敏感数据加密存储
- **HTTPS**: 所有网络请求使用HTTPS
- **接口签名**: API请求签名验证

### 2. 用户安全

- **输入验证**: 严格的用户输入验证
- **防XSS**: 防止跨站脚本攻击
- **防CSRF**: 防止跨站请求伪造
## 技术选型理由

### 1. 选择微信小程序原生框架
- **官方支持**: 微信官方维护，更新及时
- **性能优化**: 针对小程序环境优化
- **生态完善**: 丰富的官方组件和API
- **学习成本低**: 类似Web开发技术栈，易于上手
### 2. 模块化和组件化设计
- **代码复用**: 提高开发效率和代码质量
- **可维护性好**: 模块化结构易于维护和扩展
- **团队协作**: 明确的模块边界易于团队协作
### 3. 多语言支持

- **国际化需求**: 支持多地区用户使用
- **统一管理**: 翻译内容集中管理
- **动态切换**: 运行时动态切换语言

## 技术发展规划
### 1. 近期规划

- **性能优化**: 进一步提升应用性能和用户体验
- **功能扩展**: 增加更多增值服务和功能
- **测试覆盖**: 提高单元测试和集成测试覆盖率

### 2. 远期规划

- **技术升级**: 关注微信小程序新特性
- **架构演进**: 根据业务发展优化系统架构
- **开发流程**: 完善开发、测试、部署流程

## 相关技术学习资源
### 1. 官方文档

- [微信小程序开发文档](https://developers.weixin.qq.com/miniprogram/dev/framework/)
- [微信开放平台](https://open.weixin.qq.com/)

### 2. 推荐书籍

- 《微信小程序开发实战》
- 《JavaScript高级程序设计》
### 3. 在线资源

- [微信开发者社区](https://developers.weixin.qq.com/community/develop/)
- [掘金微信小程序专题](https://juejin.cn/column/wxmini)
- [GitHub微信小程序示例](https://github.com/topics/wechat-miniapp)

## 版本历史

| 版本号 | 更新日期 | 更新内容 |
|--------|----------|----------|
| 1.0.0  | 2025-11-24 | 统一文档格式，规范版本号，更新文档头部信息 |
| 1.0.16 | 2024-11-01 | 增加版本号和最后更新时间 |
| 1.0.15 | 2024-10-25 | 完善安全技术说明 |
| 1.0.14 | 2024-10-20 | 更新技术发展规划 |
| 1.0.13 | 2024-10-15 | 增加性能优化技术 |
| 1.0.12 | 2024-10-10 | 完善测试与质量保证 |
| 1.0.11 | 2024-10-05 | 更新项目依赖与库 |
| 1.0.10 | 2024-09-30 | 增加开发工具与环境 |
| 1.0.9 | 2024-09-25 | 完善功能模块技术 |
| 1.0.8 | 2024-09-20 | 更新前端开发技术 |
| 1.0.7 | 2024-09-15 | 增加技术选型理由 |
| 1.0.6 | 2024-09-10 | 完善多语言支持说明 |
| 1.0.5 | 2024-09-05 | 增加图片处理技术 |
| 1.0.4 | 2024-08-30 | 更新数据管理技术 |
| 1.0.3 | 2024-08-25 | 完善网络请求说明 |
| 1.0.2 | 2024-08-20 | 更新项目架构说明 |
| 1.0.1 | 2024-08-15 | 初始版本 |
'''
    elif filename == "README.md":
        content = '''<!--
文件名: README.md
版本号: 1.0.0
更新日期: 2025-11-27
作者: Sut
描述: 项目概览目录说明文档，提供项目整体介绍与导航
-->
# 项目概览目录说明

本目录包含SutWxApp项目的整体介绍、目录结构和技术栈等基础信息，帮助读者快速了解项目全貌。
## 快速导航
- 《01-项目简介》: 项目背景、目标、功能定位和愿景。
- 《02-目录结构》: 项目文件组织方式和各目录用途。
- 《03-技术栈》: 项目使用的主要技术框架和工具。
## 维护规范
- 项目概览内容需与项目实际情况保持一致。
- 技术栈更新时需及时同步本目录文档。
- 目录结构变化时需更新《02-目录结构》文档。
'''
    else:
        content = f'''<!--
文件名: {filename}
版本号: 1.0.0
更新日期: 2025-11-27
作者: Sut
描述: {filename} 文档
-->
# {filename}

这是 {filename} 的内容。
'''
    
    # 写入文件，使用UTF-8无BOM格式，Unix LF换行符
    with open(file_path, 'w', encoding='utf-8', newline='\n') as f:
        f.write(content)
    
    print(f"成功重新创建文件: {file_path}")

def main():
    """
    主函数，处理指定目录下的所有Markdown文件
    """
    # 指定要处理的目录
    target_dir = os.path.join(os.getcwd(), 'docs', '00-项目概览')
    
    # 检查目录是否存在
    if not os.path.exists(target_dir):
        print(f"目录不存在: {target_dir}")
        return
    
    # 遍历目录下的所有.md文件
    for filename in os.listdir(target_dir):
        if filename.endswith('.md'):
            file_path = os.path.join(target_dir, filename)
            recreate_file(file_path)
            print()

if __name__ == "__main__":
    main()
