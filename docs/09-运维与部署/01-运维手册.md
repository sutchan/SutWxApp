<!--
文件名: 01-运维手册.md
版本号: 1.0.0
更新日期: 2025-11-28
描述: 运维手册文档文件
-->
# 运维手册

## 1. 环境与配置
- 运行环境：Node.js、数据库、存储（如 Redis），HTTPS 证书
- 配置管理：使用环境变量或配置文件，要避免硬编码敏感信息
- 日志与监控：接入集中日志与指标监控（错误率、耗时、集群负载）

## 2. 部署流程
- 构建前清理缓存与临时文件
- 运行代码检查与测试；通过后打包构建产物到 `dist/`
- 灰度发布：小流量验证功能与性能；监控灰度与回滚阈值
- 正式发布：全流量，观察关键指标，记录版本变更

## 3. 日常操作
- 服务重启与滚动更新：保持无停切换与状态检查
- 配置变更：走变更流程、双备份、最小化风险窗口
- 数据变更：DDL/DML 先备份后执行，提供回滚机制与操作记录

## 4. 备份与恢复
- 数据库每日全备与多副本存储；定期恢复演练
- 文件与对象存储的版本管理与生命周期策略
- 关键配置与证书的安全备份与到期提醒

## 5. 安全与风险
- 权限控制：按角色分配最小权限；操作审计日志
- 网络安全：只开放必要端口与来源；强化 HTTPS
- 敏感信息：统一密钥管理与过期策略；避免日志明文

## 6. 故障响应
- 分级响应：P0（核心不可用）、P1（部分不可用）、P2（性能异常）
- 快速定位：日志、指标、链路追踪与最近变更回顾
- 回滚策略：预设回滚包与机制；通知相关方并记录时间线

## 7. 运维指标
- 可用性 ≥99.9%。错误率 ≤0.5%
- 接口 95 百分位耗时达标；资源利用率可控与重试成功率

## 8. 版本与变更
- 每次发布记录版本号、更新内容、影响范围与回滚方案
- 重要变更需评估并在运维手册醒目位置更新风险提示
