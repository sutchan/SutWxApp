# 测试用例

## 1. 概述
本文件列出 SutWxApp 的核心测试用例，覆盖单元、集成、接口与端到端场景，确保关键业务流程稳定可靠。

## 2. 测试范围
- 用户与认证：登录、刷新 Token、权限拦截。
- 商品与分类：列表、详情、规格选择、库存校验。
- 购物车：添加/移除、数量变更、价格计算、优惠叠加。
- 订单：创建、支付、发货、取消、退款售后。
- 积分系统：获取/消耗/过期/冻结与回退。
- 消息中心：订阅消息、模板推送、站内消息查看。

## 3. 用例模板
```
用例编号：TC-<模块>-<序号>
标题：<简要描述>
前置条件：<数据/登录/环境>
步骤：
 1) ...
 2) ...
预期结果：<状态码/页面呈现/数据变更>
边界与异常：<并发/限频/无库存/网络异常>
备注：<日志校验/告警/监控>
```

## 4. 典型用例
- TC-Auth-001 登录成功与失败：
  - 前置：用户存在/不存在；密码正确/错误。
  - 步骤：发起登录→校验响应→写入本地状态。
  - 预期：成功返回 Token；失败返回错误码与提示。

- TC-Cart-002 购物车价格计算与优惠叠加：
  - 前置：多商品、不同优惠策略与库存。
  - 步骤：添加→修改数量→应用优惠→结算预览。
  - 预期：价格正确、优惠策略生效、库存校验通过。

- TC-Order-003 下单与支付闭环：
  - 前置：购物车就绪、库存足、支付通道正常。
  - 步骤：下单→支付→发货→完成→订单状态流转。
  - 预期：状态正确、消息通知发送、积分发放/冻结。

- TC-Points-004 积分抵扣与退款回退：
  - 前置：用户有足够积分、订单可抵扣。
  - 步骤：使用积分抵扣→取消/退款→积分回退。
  - 预期：扣减与回退一致、流水正确、并发幂等。

- TC-Message-005 订阅消息触达：
  - 前置：订阅授权与模板配置有效。
  - 步骤：触发事件→发送→客户端接收与展示。
  - 预期：消息送达率达标、失败有重试与告警。

## 5. 数据与环境
- 测试账号：专用账号与数据隔离。
- 测试环境：独立配置与监控，避免污染生产数据。
- 数据准备：商品、库存、优惠、订单、积分流水等基准数据。

## 6. 验证与度量
- 覆盖率：核心功能与关键路径 90%+。
- 质量门禁：提交前通过静态检查、单元与接口测试。
- 监控指标：错误率、接口耗时、消息失败率、订单成功率。
