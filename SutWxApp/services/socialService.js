/**\n * 鏂囦欢鍚? socialService.js\n * 鐗堟湰鍙? 1.0.0\n * 鏇存柊鏃ユ湡: 2025-11-30\n * 鎻忚堪: 绀句氦鍔熻兘鏈嶅姟锛屽寘鎷晢鍝佸垎浜€佽瘎璁恒€佺偣璧炵瓑\n */\n\nconst request = require('../utils/request');\n\n/**\n * 鍒嗕韩鍟嗗搧\n * @param {Object} options - 鍒嗕韩鍙傛暟\n * @param {string} options.productId - 鍟嗗搧ID\n * @param {string} options.title - 鍒嗕韩鏍囬\n * @param {string} options.description - 鍒嗕韩鎻忚堪\n * @param {string} options.imageUrl - 鍒嗕韩鍥剧墖URL\n * @param {string} options.shareChannel - 鍒嗕韩娓犻亾: wechat/friend/circle/qq/weibo\n * @returns {Promise<Object>} 鍒嗕韩缁撴灉\n */\nasync function shareProduct(options = {}) {\n  const {\n    productId,\n    title,\n    description,\n    imageUrl,\n    shareChannel = 'wechat'\n  } = options;\n\n  if (!productId) {\n    throw new Error('鍟嗗搧ID涓嶈兘涓虹┖');\n  }\n\n  return request.post('/social/share/product', {\n    productId,\n    title,\n    description,\n    imageUrl,\n    shareChannel\n  });\n}\n\n/**\n * 鑾峰彇鍒嗕韩璁板綍\n * @param {Object} options - 鏌ヨ鍙傛暟\n * @param {number} options.page - 椤电爜锛岄粯璁?\n * @param {number} options.pageSize - 姣忛〉鏁伴噺锛岄粯璁?0\n * @param {string} options.sort - 鎺掑簭鏂瑰紡: newest/oldest\n * @returns {Promise<Object>} 鍒嗕韩璁板綍鍒楄〃鍜屽垎椤典俊鎭?
 */\nasync function getShareRecords(options = {}) {\n  const {\n    page = 1,\n    pageSize = 20,\n    sort = 'newest'\n  } = options;\n\n  return request.get('/social/share/records', {\n    page,\n    pageSize,\n    sort\n  });\n}\n\n/**\n * 鑾峰彇鍒嗕韩缁熻\n * @param {string} productId - 鍟嗗搧ID锛屼笉浼犲垯鑾峰彇鐢ㄦ埛鎬诲垎浜粺璁?
 * @returns {Promise<Object>} 鍒嗕韩缁熻淇℃伅\n */\nasync function getShareStats(productId) {\n  const url = productId ? `/social/share/stats/product/${productId}` : '/social/share/stats';\n  return request.get(url);\n}\n\n/**\n * 鑾峰彇鍟嗗搧璇勮鍒楄〃\n * @param {Object} options - 鏌ヨ鍙傛暟\n * @param {string} options.productId - 鍟嗗搧ID\n * @param {number} options.page - 椤电爜锛岄粯璁?\n * @param {number} options.pageSize - 姣忛〉鏁伴噺锛岄粯璁?0\n * @param {string} options.sort - 鎺掑簭鏂瑰紡: newest/oldest/highest/lowest\n * @param {number} options.minRating - 鏈€浣庤瘎鍒?
 * @param {boolean} options.withImages - 鏄惁鍙樉绀哄甫鍥捐瘎璁?
 * @returns {Promise<Object>} 璇勮鍒楄〃鍜屽垎椤典俊鎭?
 */\nasync function getProductComments(options = {}) {\n  const {\n    productId,\n    page = 1,\n    pageSize = 20,\n    sort = 'newest',\n    minRating,\n    withImages\n  } = options;\n\n  if (!productId) {\n    throw new Error('鍟嗗搧ID涓嶈兘涓虹┖');\n  }\n\n  const params = {\n    page,\n    pageSize,\n    sort\n  };\n\n  if (minRating) params.minRating = minRating;\n  if (withImages) params.withImages = withImages;\n\n  return request.get(`/products/${productId}/comments`, params);\n}\n\n/**\n * 鑾峰彇鏂囩珷璇勮鍒楄〃\n * @param {Object} options - 鏌ヨ鍙傛暟\n * @param {string} options.articleId - 鏂囩珷ID\n * @param {number} options.page - 椤电爜锛岄粯璁?\n * @param {number} options.pageSize - 姣忛〉鏁伴噺锛岄粯璁?0\n * @param {string} options.sort - 鎺掑簭鏂瑰紡: newest/oldest\n * @returns {Promise<Object>} 璇勮鍒楄〃鍜屽垎椤典俊鎭?
 */\nasync function getArticleComments(options = {}) {\n  const {\n    articleId,\n    page = 1,\n    pageSize = 20,\n    sort = 'newest'\n  } = options;\n\n  if (!articleId) {\n    throw new Error('鏂囩珷ID涓嶈兘涓虹┖');\n  }\n\n  return request.get(`/articles/${articleId}/comments`, {\n    page,\n    pageSize,\n    sort\n  });\n}\n\n/**\n * 娣诲姞鍟嗗搧璇勮\n * @param {Object} data - 璇勮鏁版嵁\n * @param {string} data.productId - 鍟嗗搧ID\n * @param {string} data.content - 璇勮鍐呭\n * @param {number} data.rating - 璇勫垎锛?-5\n * @param {Array} data.images - 璇勮鍥剧墖URL鏁扮粍\n * @param {boolean} data.anonymous - 鏄惁鍖垮悕\n * @returns {Promise<Object>} 璇勮缁撴灉\n */\nasync function addProductComment(data) {\n  const {\n    productId,\n    content,\n    rating,\n    images = [],\n    anonymous = false\n  } = data;\n\n  if (!productId) {\n    throw new Error('鍟嗗搧ID涓嶈兘涓虹┖');\n  }\n\n  if (!content || content.trim().length === 0) {\n    throw new Error('璇勮鍐呭涓嶈兘涓虹┖');\n  }\n\n  if (rating < 1 || rating > 5) {\n    throw new Error('璇勫垎蹇呴』鍦?-5涔嬮棿');\n  }\n\n  return request.post('/social/comments/product', {\n    productId,\n    content: content.trim(),\n    rating,\n    images,\n    anonymous\n  });\n}\n\n/**\n * 娣诲姞鏂囩珷璇勮\n * @param {Object} data - 璇勮鏁版嵁\n * @param {string} data.articleId - 鏂囩珷ID\n * @param {string} data.content - 璇勮鍐呭\n * @param {boolean} data.anonymous - 鏄惁鍖垮悕\n * @returns {Promise<Object>} 璇勮缁撴灉\n */\nasync function addArticleComment(data) {\n  const {\n    articleId,\n    content,\n    anonymous = false\n  } = data;\n\n  if (!articleId) {\n    throw new Error('鏂囩珷ID涓嶈兘涓虹┖');\n  }\n\n  if (!content || content.trim().length === 0) {\n    throw new Error('璇勮鍐呭涓嶈兘涓虹┖');\n  }\n\n  return request.post('/social/comments/article', {\n    articleId,\n    content: content.trim(),\n    anonymous\n  });\n}\n\n/**\n * 鍥炲璇勮\n * @param {Object} data - 鍥炲鏁版嵁\n * @param {string} data.commentId - 璇勮ID\n * @param {string} data.content - 鍥炲鍐呭\n * @param {boolean} data.anonymous - 鏄惁鍖垮悕\n * @returns {Promise<Object>} 鍥炲缁撴灉\n */\nasync function replyComment(data) {\n  const {\n    commentId,\n    content,\n    anonymous = false\n  } = data;\n\n  if (!commentId) {\n    throw new Error('璇勮ID涓嶈兘涓虹┖');\n  }\n\n  if (!content || content.trim().length === 0) {\n    throw new Error('鍥炲鍐呭涓嶈兘涓虹┖');\n  }\n\n  return request.post(`/social/comments/${commentId}/reply`, {\n    content: content.trim(),\n    anonymous\n  });\n}\n\n/**\n * 鍒犻櫎璇勮\n * @param {string} commentId - 璇勮ID\n * @returns {Promise<Object>} 鍒犻櫎缁撴灉\n */\nasync function deleteComment(commentId) {\n  if (!commentId) {\n    throw new Error('璇勮ID涓嶈兘涓虹┖');\n  }\n\n  return request.delete(`/social/comments/${commentId}`);\n}\n\n/**\n * 鐐硅禐璇勮\n * @param {string} commentId - 璇勮ID\n * @returns {Promise<Object>} 鐐硅禐缁撴灉\n */\nasync function likeComment(commentId) {\n  if (!commentId) {\n    throw new Error('璇勮ID涓嶈兘涓虹┖');\n  }\n\n  return request.post(`/social/comments/${commentId}/like`);\n}\n\n/**\n * 鍙栨秷鐐硅禐璇勮\n * @param {string} commentId - 璇勮ID\n * @returns {Promise<Object>} 鍙栨秷鐐硅禐缁撴灉\n */\nasync function unlikeComment(commentId) {\n  if (!commentId) {\n    throw new Error('璇勮ID涓嶈兘涓虹┖');\n  }\n\n  return request.delete(`/social/comments/${commentId}/like`);\n}\n\n/**\n * 鐐硅禐鍟嗗搧\n * @param {string} productId - 鍟嗗搧ID\n * @returns {Promise<Object>} 鐐硅禐缁撴灉\n */\nasync function likeProduct(productId) {\n  if (!productId) {\n    throw new Error('鍟嗗搧ID涓嶈兘涓虹┖');\n  }\n\n  return request.post(`/social/like/product/${productId}`);\n}\n\n/**\n * 鍙栨秷鐐硅禐鍟嗗搧\n * @param {string} productId - 鍟嗗搧ID\n * @returns {Promise<Object>} 鍙栨秷鐐硅禐缁撴灉\n */\nasync function unlikeProduct(productId) {\n  if (!productId) {\n    throw new Error('鍟嗗搧ID涓嶈兘涓虹┖');\n  }\n\n  return request.delete(`/social/like/product/${productId}`);\n}\n\n/**\n * 鐐硅禐鏂囩珷\n * @param {string} articleId - 鏂囩珷ID\n * @returns {Promise<Object>} 鐐硅禐缁撴灉\n */\nasync function likeArticle(articleId) {\n  if (!articleId) {\n    throw new Error('鏂囩珷ID涓嶈兘涓虹┖');\n  }\n\n  return request.post(`/social/like/article/${articleId}`);\n}\n\n/**\n * 鍙栨秷鐐硅禐鏂囩珷\n * @param {string} articleId - 鏂囩珷ID\n * @returns {Promise<Object>} 鍙栨秷鐐硅禐缁撴灉\n */\nasync function unlikeArticle(articleId) {\n  if (!articleId) {\n    throw new Error('鏂囩珷ID涓嶈兘涓虹┖');\n  }\n\n  return request.delete(`/social/like/article/${articleId}`);\n}\n\n/**\n * 妫€鏌ユ槸鍚﹀凡鐐硅禐\n * @param {Object} options - 妫€鏌ュ弬鏁?
 * @param {string} options.targetId - 鐩爣ID\n * @param {string} options.targetType - 鐩爣绫诲瀷: product/article/comment\n * @returns {Promise<Object>} 妫€鏌ョ粨鏋?
 */\nasync function checkLikeStatus(options = {}) {\n  const {\n    targetId,\n    targetType\n  } = options;\n\n  if (!targetId || !targetType) {\n    throw new Error('鐩爣ID鍜岀被鍨嬩笉鑳戒负绌?);\n  }\n\n  return request.get('/social/like/check', {\n    targetId,\n    targetType\n  });\n}\n\n/**\n * 鑾峰彇鐐硅禐璁板綍\n * @param {Object} options - 鏌ヨ鍙傛暟\n * @param {string} options.targetType - 鐩爣绫诲瀷: product/article/comment/all\n * @param {number} options.page - 椤电爜锛岄粯璁?\n * @param {number} options.pageSize - 姣忛〉鏁伴噺锛岄粯璁?0\n * @returns {Promise<Object>} 鐐硅禐璁板綍鍒楄〃鍜屽垎椤典俊鎭?
 */\nasync function getLikeRecords(options = {}) {\n  const {\n    targetType = 'all',\n    page = 1,\n    pageSize = 20\n  } = options;\n\n  return request.get('/social/like/records', {\n    targetType,\n    page,\n    pageSize\n  });\n}\n\n/**\n * 鑾峰彇鍟嗗搧鐐硅禐缁熻\n * @param {string} productId - 鍟嗗搧ID\n * @returns {Promise<Object>} 鐐硅禐缁熻淇℃伅\n */\nasync function getProductLikeStats(productId) {\n  if (!productId) {\n    throw new Error('鍟嗗搧ID涓嶈兘涓虹┖');\n  }\n\n  return request.get(`/social/like/stats/product/${productId}`);\n}\n\n/**\n * 鑾峰彇鏂囩珷鐐硅禐缁熻\n * @param {string} articleId - 鏂囩珷ID\n * @returns {Promise<Object>} 鐐硅禐缁熻淇℃伅\n */\nasync function getArticleLikeStats(articleId) {\n  if (!articleId) {\n    throw new Error('鏂囩珷ID涓嶈兘涓虹┖');\n  }\n\n  return request.get(`/social/like/stats/article/${articleId}`);\n}\n\n/**\n * 鑾峰彇璇勮鐐硅禐缁熻\n * @param {string} commentId - 璇勮ID\n * @returns {Promise<Object>} 鐐硅禐缁熻淇℃伅\n */\nasync function getCommentLikeStats(commentId) {\n  if (!commentId) {\n    throw new Error('璇勮ID涓嶈兘涓虹┖');\n  }\n\n  return request.get(`/social/like/stats/comment/${commentId}`);\n}\n\n/**\n * 涓炬姤璇勮\n * @param {Object} data - 涓炬姤鏁版嵁\n * @param {string} data.commentId - 璇勮ID\n * @param {string} data.reason - 涓炬姤鍘熷洜: spam/abuse/pornography/violence/other\n * @param {string} data.description - 涓炬姤鎻忚堪\n * @returns {Promise<Object>} 涓炬姤缁撴灉\n */\nasync function reportComment(data) {\n  const {\n    commentId,\n    reason,\n    description\n  } = data;\n\n  if (!commentId || !reason) {\n    throw new Error('璇勮ID鍜屼妇鎶ュ師鍥犱笉鑳戒负绌?);\n  }\n\n  return request.post('/social/comments/report', {\n    commentId,\n    reason,\n    description\n  });\n}\n\n/**\n * 鑾峰彇璇勮鍥炲鍒楄〃\n * @param {string} commentId - 璇勮ID\n * @param {number} page - 椤电爜锛岄粯璁?\n * @param {number} pageSize - 姣忛〉鏁伴噺锛岄粯璁?0\n * @returns {Promise<Object>} 鍥炲鍒楄〃鍜屽垎椤典俊鎭?
 */\nasync function getCommentReplies(commentId, page = 1, pageSize = 20) {\n  if (!commentId) {\n    throw new Error('璇勮ID涓嶈兘涓虹┖');\n  }\n\n  return request.get(`/social/comments/${commentId}/replies`, {\n    page,\n    pageSize\n  });\n}\n\n/**\n * 鑾峰彇鐑棬璇勮\n * @param {Object} options - 鏌ヨ鍙傛暟\n * @param {string} options.targetId - 鐩爣ID\n * @param {string} options.targetType - 鐩爣绫诲瀷: product/article\n * @param {number} options.limit - 鏁伴噺闄愬埗锛岄粯璁?0\n * @returns {Promise<Array>} 鐑棬璇勮鍒楄〃\n */\nasync function getHotComments(options = {}) {\n  const {\n    targetId,\n    targetType,\n    limit = 10\n  } = options;\n\n  if (!targetId || !targetType) {\n    throw new Error('鐩爣ID鍜岀被鍨嬩笉鑳戒负绌?);\n  }\n\n  return request.get('/social/comments/hot', {\n    targetId,\n    targetType,\n    limit\n  });\n}\n\n/**\n * 鑾峰彇鐢ㄦ埛璇勮鍒楄〃\n * @param {Object} options - 鏌ヨ鍙傛暟\n * @param {string} options.userId - 鐢ㄦ埛ID锛屼笉浼犲垯鑾峰彇褰撳墠鐢ㄦ埛\n * @param {number} options.page - 椤电爜锛岄粯璁?\n * @param {number} options.pageSize - 姣忛〉鏁伴噺锛岄粯璁?0\n * @param {string} options.sort - 鎺掑簭鏂瑰紡: newest/oldest\n * @returns {Promise<Object>} 璇勮鍒楄〃鍜屽垎椤典俊鎭?
 */\nasync function getUserComments(options = {}) {\n  const {\n    userId,\n    page = 1,\n    pageSize = 20,\n    sort = 'newest'\n  } = options;\n\n  const params = {\n    page,\n    pageSize,\n    sort\n  };\n\n  const url = userId ? `/users/${userId}/comments` : '/user/comments';\n\n  return request.get(url, params);\n}\n\n/**\n * 鑾峰彇鐢ㄦ埛鐐硅禐鍒楄〃\n * @param {Object} options - 鏌ヨ鍙傛暟\n * @param {string} options.userId - 鐢ㄦ埛ID锛屼笉浼犲垯鑾峰彇褰撳墠鐢ㄦ埛\n * @param {number} options.page - 椤电爜锛岄粯璁?\n * @param {number} options.pageSize - 姣忛〉鏁伴噺锛岄粯璁?0\n * @param {string} options.sort - 鎺掑簭鏂瑰紡: newest/oldest\n * @returns {Promise<Object>} 鐐硅禐鍒楄〃鍜屽垎椤典俊鎭?
 */\nasync function getUserLikes(options = {}) {\n  const {\n    userId,\n    page = 1,\n    pageSize = 20,\n    sort = 'newest'\n  } = options;\n\n  const params = {\n    page,\n    pageSize,\n    sort\n  };\n\n  const url = userId ? `/users/${userId}/likes` : '/user/likes';\n\n  return request.get(url, params);\n}\n\nmodule.exports = {\n  shareProduct,\n  getShareRecords,\n  getShareStats,\n  getProductComments,\n  getArticleComments,\n  addProductComment,\n  addArticleComment,\n  replyComment,\n  deleteComment,\n  likeComment,\n  unlikeComment,\n  likeProduct,\n  unlikeProduct,\n  likeArticle,\n  unlikeArticle,\n  checkLikeStatus,\n  getLikeRecords,\n  getProductLikeStats,\n  getArticleLikeStats,\n  getCommentLikeStats,\n  reportComment,\n  getCommentReplies,\n  getHotComments,\n  getUserComments,\n  getUserLikes\n};\n