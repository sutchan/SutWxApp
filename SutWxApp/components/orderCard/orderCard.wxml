/**
 * 鏂囦欢鍚? orderCard.wxml
 * 鐗堟湰鍙? 1.0.0
 * 鏇存柊鏃ユ湡: 2025-11-23
 * 鎻忚堪: orderCard 妞ょ敻娼扮紒鎾寸€弬鍥︽
 */
<view class="order-card {{bordered ? 'bordered' : ''}}" style="width: {{width}}" bindtap="onOrderTap">
  <!-- 鐠併垹宕熸径鎾劥 -->
  <view class="order-header">
    <view class="order-info">
      <text class="order-no">鐠併垹宕熼崣鍑ょ窗{{order.orderNo}}</text>
      <text class="order-time">{{order.createTime}}</text>
    </view>
    <view class="order-status" style="color: {{statusMap[order.status].color}}">
      {{statusMap[order.status].text}}
    </view>
  </view>
  
  <!-- 閸熷棗鎼ч崚妤勩€?-->
  <view class="order-items">
    <view class="item" wx:for="{{order.items}}" wx:key="id">
      <view class="item-image-container">
        <lazy-image 
          src="{{item.image}}" 
          mode="aspectFill" 
          class="item-image"
        />
      </view>
      <view class="item-info">
        <view class="item-name">{{item.name}}</view>
        <view class="item-specs" wx:if="{{item.specs}}">{{item.specs}}</view>
        <view class="item-price-row">
          <text class="item-price">妤納{item.price}}</text>
          <text class="item-quantity">x{{item.quantity}}</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 鐠併垹宕熼幀鏄忣吀 -->
  <view class="order-summary">
    <view class="summary-row" wx:if="{{order.items && order.items.length > 1}}">
      <text class="summary-label">閸忕湧{order.items.length}}娴犺泛鏅㈤崫?/text>
    </view>
    <view class="summary-row">
      <text class="summary-label">鐠併垹宕熼幀濠氼杺</text>
      <text class="summary-value">妤納{order.totalAmount}}</text>
    </view>
    <view class="summary-row" wx:if="{{order.shippingFee > 0}}">
      <text class="summary-label">鏉╂劘鍨?/text>
      <text class="summary-value">妤納{order.shippingFee}}</text>
    </view>
    <view class="summary-row" wx:if="{{order.discountAmount > 0}}">
      <text class="summary-label">娴兼ɑ鍎?/text>
      <text class="summary-value discount">-妤納{order.discountAmount}}</text>
    </view>
    <view class="summary-row total">
      <text class="summary-label">鐎圭偘绮柌鎴︻杺</text>
      <text class="summary-value total-amount">妤納{order.payAmount}}</text>
    </view>
  </view>
  
  <!-- 閹垮秳缍旈幐澶愭尦 -->
  <view class="order-actions" wx:if="{{showActions}}">
    <!-- 瀵板懍绮▎鍓уЦ閹?-->
    <block wx:if="{{order.status === 'pending'}}">
      <button class="action-btn cancel" size="mini" bindtap="onCancelOrder">閸欐牗绉风拋銏犲礋</button>
      <button class="action-btn primary" size="mini">閸樼粯鏁禒?/button>
    </block>
    
    <!-- 瀵板懎褰傜拹褏濮搁幀?-->
    <block wx:elif="{{order.status === 'paid'}}">
      <button class="action-btn" size="mini" bindtap="onCancelOrder">閸欐牗绉风拋銏犲礋</button>
    </block>
    
    <!-- 瀵板懏鏁圭拹褏濮搁幀?-->
    <block wx:elif="{{order.status === 'shipped'}}">
      <button class="action-btn" size="mini" bindtap="onViewLogistics">閺屻儳婀呴悧鈺傜ウ</button>
      <button class="action-btn primary" size="mini" bindtap="onConfirmReceive">绾喛顓婚弨鎯版彛</button>
    </block>
    
    <!-- 瀹告彃鐣幋鎰Ц閹?-->
    <block wx:elif="{{order.status === 'completed'}}">
      <button class="action-btn" size="mini" bindtap="onReviewOrder" wx:if="{{!order.isReviewed}}">鐠囧嫪鐜?/button>
      <button class="action-btn" size="mini" bindtap="onViewLogistics">閺屻儳婀呴悧鈺傜ウ</button>
      <button class="action-btn" size="mini" bindtap="onDeleteOrder">閸掔娀娅庣拋銏犲礋</button>
    </block>
    
    <!-- 瀹告彃褰囧☉鍫㈠Ц閹?-->
    <block wx:elif="{{order.status === 'cancelled'}}">
      <button class="action-btn" size="mini" bindtap="onDeleteOrder">閸掔娀娅庣拋銏犲礋</button>
    </block>
  </view>
</view>