/**
 * 文件名 result.wxml
 * 版本号 1.0.0
 * 更新日期: 2025-11-23
 * 描述: result 妞ょ敻娼扮紒鎾寸€弬鍥︽
 */
<view class="container">
  <!-- 閹兼粎鍌ㄥ?-->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <icon class="search-icon" type="search" size="16"></icon>
      <input 
        class="search-input" 
        placeholder="閹兼粎鍌ㄩ崯鍡楁惂閵嗕焦鏋冪粩鐘偓浣烘暏閹? 
        value="{{keyword}}"
        bindinput="onInputChange"
        bindconfirm="onSearch"
      />
      <view wx:if="{{keyword}}" class="clear-icon" bindtap="onClearInput">
        <icon type="clear" size="16"></icon>
      </view>
    </view>
    <view class="search-btn" bindtap="onSearch">閹兼粎鍌?/view>
  </view>
  
  <!-- 閹兼粎鍌ㄧ紒鎾寸亯 -->
  <view wx:if="{{showResult}}" class="search-result">
    <!-- 閺嶅洨顒烽崚鍥ㄥ床 -->
    <view class="tabs">
      <view 
        wx:for="{{tabs}}" 
        wx:key="key" 
        class="tab-item {{activeTab === item.key ? 'active' : ''}}"
        data-tab="{{item.key}}"
        bindtap="onTabChange"
      >
        {{item.value}}
      </view>
    </view>
    
    <!-- 閹兼粎鍌ㄧ紒鎾寸亯閸掓銆?-->
    <view class="result-list">
      <view 
        wx:for="{{searchResults}}" 
        wx:key="id" 
        class="result-item"
        data-type="{{item.type}}"
        data-id="{{item.id}}"
        bindtap="onResultTap"
      >
        <image class="result-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="result-content">
          <view class="result-title">{{item.title}}</view>
          <view class="result-desc">{{item.desc}}</view>
          <view class="result-meta">
            <block wx:if="{{item.type === 'product'}}">
              <text class="result-price">¥{{item.price}}</text>
            </block>
            <block wx:elif="{{item.type === 'article'}}">
              <text class="result-time">{{item.publishTime}}</text>
            </block>
            <block wx:elif="{{item.type === 'user'}}">
              <text class="result-fans">{{item.fans}}缁绗?/text>
            </block>
          </view>
        </view>
        <view class="result-type">
          <block wx:if="{{item.type === 'product'}}">閸熷棗鎼?/block>
          <block wx:elif="{{item.type === 'article'}}">閺傚洨鐝?/block>
          <block wx:elif="{{item.type === 'user'}}">閻劍鍩?/block>
        </view>
      </view>
      
      <!-- 加载状态->
      <view wx:if="{{loading}}" class="loading">
        <text>鍔犺浇涓?.</text>
      </view>
      
      <!-- 閺冪姵娲挎径姘殶閹?-->
      <view wx:if="{{!hasMore && searchResults.length > 0}}" class="no-more">
        <text>濞屸剝婀侀弴鏉戭樋缂佹挻鐏夋禍?/text>
      </view>
      
      <!-- 缁岃櫣濮搁幀?-->
      <view wx:if="{{!loading && searchResults.length === 0}}" class="empty-state">
        <text>閺堫亝澹橀崚鎵祲閸忓磭绮ㄩ弸?/text>
      </view>
    </view>
  </view>
  
  <!-- 閹兼粎鍌ㄩ崢鍡楀蕉閸滃瞼鍎归梻銊︽偝缁?-->
  <view wx:else class="search-suggest">
    <!-- 閹兼粎鍌ㄩ崢鍡楀蕉 -->
    <view wx:if="{{searchHistory.length > 0}}" class="search-history">
      <view class="section-header">
        <text class="section-title">閹兼粎鍌ㄩ崢鍡楀蕉</text>
        <text class="clear-history" bindtap="onClearHistory">濞撳懐鈹?/text>
      </view>
      <view class="history-list">
        <view 
          wx:for="{{searchHistory}}" 
          wx:key="*this" 
          class="history-item"
          data-keyword="{{item}}"
          bindtap="onHistoryTap"
        >
          {{item}}
        </view>
      </view>
    </view>
    
    <!-- 閻戭參妫幖婊呭偍 -->
    <view wx:if="{{hotSearches.length > 0}}" class="hot-search">
      <view class="section-header">
        <text class="section-title">閻戭參妫幖婊呭偍</text>
      </view>
      <view class="hot-list">
        <view 
          wx:for="{{hotSearches}}" 
          wx:key="*this" 
          class="hot-item"
          data-keyword="{{item}}"
          bindtap="onHotSearchTap"
        >
          {{item}}
        </view>
      </view>
    </view>
  </view>
</view>
