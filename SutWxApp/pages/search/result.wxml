/**
 * 鏂囦欢鍚? result.wxml
 * 鐗堟湰鍙? 1.0.0
 * 鏇存柊鏃ユ湡: 2025-11-23
 * 鎻忚堪: result 椤甸潰缁撴瀯鏂囦欢
 */
<view class="container">
  <!-- 鎼滅储妗?-->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <icon class="search-icon" type="search" size="16"></icon>
      <input 
        class="search-input" 
        placeholder="鎼滅储鍟嗗搧銆佹枃绔犮€佺敤鎴? 
        value="{{keyword}}"
        bindinput="onInputChange"
        bindconfirm="onSearch"
      />
      <view wx:if="{{keyword}}" class="clear-icon" bindtap="onClearInput">
        <icon type="clear" size="16"></icon>
      </view>
    </view>
    <view class="search-btn" bindtap="onSearch">鎼滅储</view>
  </view>
  
  <!-- 鎼滅储缁撴灉 -->
  <view wx:if="{{showResult}}" class="search-result">
    <!-- 鏍囩鍒囨崲 -->
    <view class="tabs">
      <view 
        wx:for="{{tabs}}" 
        wx:key="key" 
        class="tab-item {{activeTab === item.key ? 'active' : ''}}"
        data-tab="{{item.key}}"
        bindtap="onTabChange"
      >
        {{item.value}}
      </view>
    </view>
    
    <!-- 鎼滅储缁撴灉鍒楄〃 -->
    <view class="result-list">
      <view 
        wx:for="{{searchResults}}" 
        wx:key="id" 
        class="result-item"
        data-type="{{item.type}}"
        data-id="{{item.id}}"
        bindtap="onResultTap"
      >
        <image class="result-image" src="{{item.image}}" mode="aspectFill"></image>
        <view class="result-content">
          <view class="result-title">{{item.title}}</view>
          <view class="result-desc">{{item.desc}}</view>
          <view class="result-meta">
            <block wx:if="{{item.type === 'product'}}">
              <text class="result-price">楼{{item.price}}</text>
            </block>
            <block wx:elif="{{item.type === 'article'}}">
              <text class="result-time">{{item.publishTime}}</text>
            </block>
            <block wx:elif="{{item.type === 'user'}}">
              <text class="result-fans">{{item.fans}}绮変笣</text>
            </block>
          </view>
        </view>
        <view class="result-type">
          <block wx:if="{{item.type === 'product'}}">鍟嗗搧</block>
          <block wx:elif="{{item.type === 'article'}}">鏂囩珷</block>
          <block wx:elif="{{item.type === 'user'}}">鐢ㄦ埛</block>
        </view>
      </view>
      
      <!-- 鍔犺浇鐘舵€?-->
      <view wx:if="{{loading}}" class="loading">
        <text>鍔犺浇涓?..</text>
      </view>
      
      <!-- 鏃犳洿澶氭暟鎹?-->
      <view wx:if="{{!hasMore && searchResults.length > 0}}" class="no-more">
        <text>娌℃湁鏇村缁撴灉浜?/text>
      </view>
      
      <!-- 绌虹姸鎬?-->
      <view wx:if="{{!loading && searchResults.length === 0}}" class="empty-state">
        <text>鏈壘鍒扮浉鍏崇粨鏋?/text>
      </view>
    </view>
  </view>
  
  <!-- 鎼滅储鍘嗗彶鍜岀儹闂ㄦ悳绱?-->
  <view wx:else class="search-suggest">
    <!-- 鎼滅储鍘嗗彶 -->
    <view wx:if="{{searchHistory.length > 0}}" class="search-history">
      <view class="section-header">
        <text class="section-title">鎼滅储鍘嗗彶</text>
        <text class="clear-history" bindtap="onClearHistory">娓呯┖</text>
      </view>
      <view class="history-list">
        <view 
          wx:for="{{searchHistory}}" 
          wx:key="*this" 
          class="history-item"
          data-keyword="{{item}}"
          bindtap="onHistoryTap"
        >
          {{item}}
        </view>
      </view>
    </view>
    
    <!-- 鐑棬鎼滅储 -->
    <view wx:if="{{hotSearches.length > 0}}" class="hot-search">
      <view class="section-header">
        <text class="section-title">鐑棬鎼滅储</text>
      </view>
      <view class="hot-list">
        <view 
          wx:for="{{hotSearches}}" 
          wx:key="*this" 
          class="hot-item"
          data-keyword="{{item}}"
          bindtap="onHotSearchTap"
        >
          {{item}}
        </view>
      </view>
    </view>
  </view>
</view>