<!-- pages/index/index.wxml -->
<view class="container">
  <!-- è½®æ’­å›¾ -->
  <view class="banner-container">
    <swiper class="banner-swiper" indicator-dots="true" autoplay="true" interval="3000" duration="500">
      <block wx:for="{{bannerList}}" wx:key="id">
        <swiper-item bindtap="onBannerClick" data-item="{{item}}">
          <image src="{{item.image_url}}" mode="aspectFill" class="banner-image"></image>
          <view class="banner-title">{{item.title}}</view>
        </swiper-item>
      </block>
    </swiper>
  </view>

  <!-- æœç´¢æ  -->
  <view class="search-container" bindtap="navigateToSearch">
    <view class="search-bar">
      <text class="search-icon">ğŸ”</text>
      <text class="search-text">æœç´¢æ–‡ç« ...</text>
    </view>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <view class="categories-container">
    <view class="section-title">
      <text>åˆ†ç±»å¯¼èˆª</text>
      <view class="more" bindtap="navigateToCategories">
        <text>æ›´å¤š</text>
        <text class="icon">></text>
      </view>
    </view>
    <view class="categories-list">
      <block wx:for="{{categories}}" wx:key="id">
        <view class="category-item" bindtap="navigateToCategoryPosts" data-id="{{item.id}}">
          <view class="category-icon">
            <text>{{item.name.charAt(0)}}</text>
          </view>
          <text class="category-name">{{item.name}}</text>
          <text class="category-count">({{item.count}})</text>
        </view>
      </block>
    </view>
  </view>

  <!-- çƒ­é—¨æ–‡ç«  -->
  <view class="hot-posts-container">
    <view class="section-title">
      <text>çƒ­é—¨æ¨è</text>
    </view>
    <view class="hot-posts-list">
      <block wx:for="{{hotPosts}}" wx:key="id">
        <view class="hot-post-item" bindtap="navigateToPostDetail" data-id="{{item.id}}">
          <view class="hot-post-rank">{{index + 1}}</view>
          <text class="hot-post-title">{{item.title}}</text>
          <text class="hot-post-views">{{item.views}}é˜…è¯»</text>
        </view>
      </block>
    </view>
  </view>

  <!-- æœ€æ–°æ–‡ç«  -->
  <view class="latest-posts-container">
    <view class="section-title">
      <text>æœ€æ–°èµ„è®¯</text>
    </view>
    <view class="latest-posts-list">
      <block wx:for="{{latestPosts}}" wx:key="id">
        <view class="post-item" bindtap="navigateToPostDetail" data-id="{{item.id}}">
          <image src="{{item.featured_image}}" mode="aspectFill" class="post-image"></image>
          <view class="post-content">
            <text class="post-title">{{item.title}}</text>
            <view class="post-meta">
              <text class="post-category">{{item.category_name}}</text>
              <text class="post-date">{{item.date}}</text>
              <text class="post-views">{{item.views}}é˜…è¯»</text>
            </view>
          </view>
        </view>
      </block>
    </view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="loading-more" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- æ²¡æœ‰æ›´å¤šæ•°æ® -->
  <view class="no-more" wx:if="{{!hasMore && latestPosts.length > 0}}">
    <text>æ²¡æœ‰æ›´å¤šäº†</text>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && latestPosts.length === 0}}">
    <text class="empty-text">æš‚æ— æ–‡ç« </text>
  </view>
</view>