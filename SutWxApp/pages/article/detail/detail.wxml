<!-- pages/article/detail/detail.wxml -->\n<view class="article-detail-container">\n  <!-- 鍔犺浇鐘舵€?-->\n  <view class="loading-container" wx:if="{{loading && !error && !showSkeleton}}">\n    <view class="loading">\n      <text>鍔犺浇涓?..</text>\n    </view>\n  </view>\n\n  <!-- 閿欒鐘舵€?-->\n  <view class="error-container" wx:if="{{error}}">\n    <image src="/images/error.png" class="error-icon"></image>\n    <text class="error-text">鍔犺浇鏂囩珷澶辫触</text>\n    <button class="retry-button" bindtap="onRetry">閲嶈瘯</button>\n  </view>\n\n  <!-- 楠ㄦ灦灞?-->\n  <view class="skeleton-container" wx:if="{{showSkeleton}}">\n    <view class="skeleton-item skeleton-title"></view>\n    <view class="skeleton-meta">\n      <view class="skeleton-item skeleton-avatar"></view>\n      <view class="skeleton-item skeleton-author"></view>\n      <view class="skeleton-item skeleton-time"></view>\n    </view>\n    <view class="skeleton-item skeleton-category"></view>\n    <view class="skeleton-content">\n      <view class="skeleton-item skeleton-paragraph"></view>\n      <view class="skeleton-item skeleton-paragraph"></view>\n      <view class="skeleton-item skeleton-paragraph"></view>\n      <view class="skeleton-item skeleton-paragraph"></view>\n      <view class="skeleton-item skeleton-paragraph"></view>\n    </view>\n  </view>\n\n  <!-- 鏂囩珷鍐呭鍖哄煙 -->\n  <view class="article-content" wx:else>\n    <!-- 鏂囩珷澶撮儴 -->\n    <view class="article-header">\n      <text class="article-title">{{article.title || '鏂囩珷鏍囬'}}</text>\n      <view class="article-meta">\n        <text class="article-author">{{article.author_name || '绠＄悊鍛?}}</text>\n        <text class="article-date">{{article.date || '鏈煡鏃堕棿'}}</text>\n        <text class="article-views">{{viewCount || 0}} 闃呰</text>\n      </view>\n      <view class="article-category" wx:if="{{article.category?.name || article.category_name}}">\n        <text>{{article.category?.name || article.category_name}}</text>\n      </view>\n    </view>\n\n    <!-- 鏂囩珷鍐呭 -->\n    <view class="article-body" wx:if="{{article.content}}">\n      <rich-text nodes="{{article.content}}" class="content-rich-text"></rich-text>\n    </view>\n    <view class="article-empty" wx:else>\n      <text>鏆傛棤鍐呭</text>\n    </view>\n\n    <!-- 鏂囩珷搴曢儴鎿嶄綔鏍?-->\n    <view class="article-actions" aria-label="鏂囩珷鎿嶄綔">\n      <view class="action-item" bindtap="likeArticle" aria-label="{{isLiked ? '鍙栨秷鐐硅禐' : '鐐硅禐'}}锛屽綋鍓嶇偣璧炴暟 {{likeCount}}">\n        <image src="{{isLiked ? '/images/like-active.png' : '/images/like.png'}}" class="action-icon"></image>\n        <text class="action-text">{{isLiked ? '宸茶禐' : '鐐硅禐'}}</text>\n        <text class="action-count">{{likeCount}}</text>\n      </view>\n      <view class="action-item" bindtap="favoriteArticle" aria-label="{{isFavorite ? '鍙栨秷鏀惰棌' : '鏀惰棌'}}锛屽綋鍓嶆敹钘忔暟 {{favoriteCount}}">\n        <image src="{{isFavorite ? '/images/favorite-active.png' : '/images/favorite.png'}}" class="action-icon"></image>\n        <text class="action-text">{{isFavorite ? '宸叉敹钘? : '鏀惰棌'}}</text>\n        <text class="action-count">{{favoriteCount}}</text>\n      </view>\n      <view class="action-item" bindtap="showCommentBox" aria-label="鏌ョ湅璇勮锛屽綋鍓嶈瘎璁烘暟 {{commentList.length}}">\n        <image src="/images/comment.png" class="action-icon"></image>\n        <text class="action-text">璇勮</text>\n        <text class="action-count">{{commentList.length}}</text>\n      </view>\n      <view class="action-item" open-type="share" aria-label="鍒嗕韩鏂囩珷">\n        <image src="/images/share.png" class="action-icon"></image>\n        <text class="action-text">鍒嗕韩</text>\n      </view>\n    </view>\n\n    <!-- 璇勮鍖哄煙 -->\n    <view class="comment-section" wx:if="{{commentList.length > 0}}" aria-label="璇勮鍒楄〃">\n      <view class="comment-header">\n        <text class="comment-title">璇勮 ({{commentList.length}})</text>\n        <button class="more-comments" bindtap="loadMoreComments" wx:if="{{commentHasMore}}" size="mini">鏌ョ湅鏇村</button>\n      </view>\n      <view class="comment-list">\n        <view class="comment-item" wx:for="{{commentList}}" wx:key="id" aria-label="{{item.username}} 鐨勮瘎璁?>\n          <view class="comment-avatar">\n            <image src="{{item.avatar || '/images/default-avatar.png'}}" mode="aspectFill" aria-label="{{item.username}} 鐨勫ご鍍?></image>\n          </view>\n          <view class="comment-content">\n            <view class="comment-user-info">\n              <text class="comment-username">{{item.username}}</text>\n              <text class="comment-time">{{item.time}}</text>\n            </view>\n            <text class="comment-text">{{item.content}}</text>\n          <view class="comment-actions">\n            <view class="comment-action-item" bindtap="likeComment" data-id="{{item.id}}" aria-label="{{item.is_liked ? '鍙栨秷鐐硅禐' : '鐐硅禐'}}璇勮">\n              <image src="{{item.is_liked ? '/images/like-active.png' : '/images/like.png' }}" class="comment-action-icon"></image>\n              <text class="comment-action-text">{{item.like_count || 0}}</text>\n            </view>\n            <view class="comment-action-item" bindtap="replyToComment" data-id="{{item.id}}" data-username="{{item.username}}" aria-label="鍥炲 {{item.username}}">\n              <text class="comment-action-text">鍥炲</text>\n            </view>\n          </view>\n          </view>\n        </view>\n        <!-- 鍔犺浇鏇村鎸夐挳 -->\n        <view class="load-more" wx:if="{{commentHasMore}}">\n          <button wx:if="{{!loadingComments}}" bindtap="loadMoreComments" class="load-more-btn">鍔犺浇鏇村</button>\n          <view wx:else class="loading-more">\n            <text>鍔犺浇涓?..</text>\n          </view>\n        </view>\n        <view class="no-more" wx:if="{{!commentHasMore}}">\n          <text>娌℃湁鏇村璇勮浜?/text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 绌鸿瘎璁烘彁绀?-->\n    <view class="empty-comments" wx:if="{{commentList.length === 0 && !loading}}" aria-label="鏆傛棤璇勮">\n      <image src="/images/empty-comments.png" class="empty-icon"></image>\n      <text class="empty-text">鏆傛棤璇勮锛屽揩鏉ユ姠娌欏彂鍚</text>\n      <button class="empty-button" bindtap="showCommentBox">鍙戣〃绗竴鏉¤瘎璁?/button>\n    </view>\n\n    <!-- 鐩稿叧鎺ㄨ崘 -->\n    <view class="related-articles" wx:if="{{article.related_posts && article.related_posts.length > 0}}" aria-label="鐩稿叧鎺ㄨ崘">\n      <view class="related-header">\n        <text class="related-title">鐩稿叧鎺ㄨ崘</text>\n      </view>\n      <view class="related-list">\n        <view class="related-item" wx:for="{{article.related_posts}}" wx:key="id" data-id="{{item.id}}" bindtap="goToArticleDetail" aria-label="鏌ョ湅鏂囩珷 {{item.title || '鏂囩珷鏍囬'}}" data-uid="article-{{item.id}}">\n          <text class="related-title">{{item.title || '鏂囩珷鏍囬'}}</text>\n          <text class="related-info">{{item.date || '鏈煡鏃堕棿'}} 路 {{item.view_count || 0}}闃呰</text>\n        </view>\n      </view>\n    </view>\n    <view class="related-articles" wx:else>\n      <view class="related-header">\n        <text class="related-title">鐩稿叧鎺ㄨ崘</text>\n      </view>\n      <view class="no-articles">\n        鏆傛棤鐩稿叧鎺ㄨ崘\n      </view>\n    </view>\n  </view>\n\n  <!-- 璇勮杈撳叆妗?-->\n  <view class="comment-input-container" wx:if="{{showCommentInput}}" aria-label="璇勮杈撳叆妗?>\n    <input class="comment-input" value="{{commentContent}}" bindinput="onCommentInput" placeholder="璇寸偣浠€涔?.." confirm-type="send" bindconfirm="submitComment" focus="{{showCommentInput}}" maxlength="500"/>\n    <button class="comment-submit" bindtap="submitComment" disabled="{{!commentContent.trim()}}">鍙戦€?/button>\n    <button class="comment-cancel" bindtap="hideCommentBox">鍙栨秷</button>\n  </view>\n\n  <!-- 楠ㄦ灦灞?-->\n  <view class="skeleton-container" wx:if="{{showSkeleton}}">\n    <view class="skeleton-title"></view>\n    <view class="skeleton-meta">\n      <view class="skeleton-author"></view>\n      <view class="skeleton-date"></view>\n      <view class="skeleton-views"></view>\n    </view>\n    <view class="skeleton-category"></view>\n    <view class="skeleton-content">\n      <view class="skeleton-paragraph"></view>\n      <view class="skeleton-paragraph"></view>\n      <view class="skeleton-paragraph"></view>\n      <view class="skeleton-paragraph"></view>\n      <view class="skeleton-paragraph"></view>\n    </view>\n  </view>\n</view>\n