锘?!-- pages/article/detail/detail.wxml -->\n<view class="article-detail-container">\n  <!-- 閸旂姾娴囬悩鑸碘偓?-->\n  <view class="loading-container" wx:if="{{loading && !error && !showSkeleton}}">\n    <view class="loading">\n      <text>閸旂姾娴囨稉?..</text>\n    </view>\n  </view>\n\n  <!-- 闁挎瑨顕ら悩鑸碘偓?-->\n  <view class="error-container" wx:if="{{error}}">\n    <image src="/images/error.png" class="error-icon"></image>\n    <text class="error-text">閸旂姾娴囬弬鍥╃彿婢惰精瑙?/text>\n    <button class="retry-button" bindtap="onRetry">闁插秷鐦?/button>\n  </view>\n\n  <!-- 妤犮劍鐏︾仦?-->\n  <view class="skeleton-container" wx:if="{{showSkeleton}}">\n    <view class="skeleton-item skeleton-title"></view>\n    <view class="skeleton-meta">\n      <view class="skeleton-item skeleton-avatar"></view>\n      <view class="skeleton-item skeleton-author"></view>\n      <view class="skeleton-item skeleton-time"></view>\n    </view>\n    <view class="skeleton-item skeleton-category"></view>\n    <view class="skeleton-content">\n      <view class="skeleton-item skeleton-paragraph"></view>\n      <view class="skeleton-item skeleton-paragraph"></view>\n      <view class="skeleton-item skeleton-paragraph"></view>\n      <view class="skeleton-item skeleton-paragraph"></view>\n      <view class="skeleton-item skeleton-paragraph"></view>\n    </view>\n  </view>\n\n  <!-- 閺傚洨鐝烽崘鍛啇閸栧搫鐓?-->\n  <view class="article-content" wx:else>\n    <!-- 閺傚洨鐝锋径鎾劥 -->\n    <view class="article-header">\n      <text class="article-title">{{article.title || '閺傚洨鐝烽弽鍥暯'}}</text>\n      <view class="article-meta">\n        <text class="article-author">{{article.author_name || '缁狅紕鎮婇崨?}}</text>\n        <text class="article-date">{{article.date || '閺堫亞鐓￠弮鍫曟？'}}</text>\n        <text class="article-views">{{viewCount || 0}} 闂冨懓顕?/text>\n      </view>\n      <view class="article-category" wx:if="{{article.category?.name || article.category_name}}">\n        <text>{{article.category?.name || article.category_name}}</text>\n      </view>\n    </view>\n\n    <!-- 閺傚洨鐝烽崘鍛啇 -->\n    <view class="article-body" wx:if="{{article.content}}">\n      <rich-text nodes="{{article.content}}" class="content-rich-text"></rich-text>\n    </view>\n    <view class="article-empty" wx:else>\n      <text>閺嗗倹妫ら崘鍛啇</text>\n    </view>\n\n    <!-- 閺傚洨鐝锋惔鏇㈠劥閹垮秳缍旈弽?-->\n    <view class="article-actions" aria-label="閺傚洨鐝烽幙宥勭稊">\n      <view class="action-item" bindtap="likeArticle" aria-label="{{isLiked ? '閸欐牗绉烽悙纭呯' : '閻愮绂?}}閿涘苯缍嬮崜宥囧仯鐠х偞鏆?{{likeCount}}">\n        <image src="{{isLiked ? '/images/like-active.png' : '/images/like.png'}}" class="action-icon"></image>\n        <text class="action-text">{{isLiked ? '瀹歌尪绂? : '閻愮绂?}}</text>\n        <text class="action-count">{{likeCount}}</text>\n      </view>\n      <view class="action-item" bindtap="favoriteArticle" aria-label="{{isFavorite ? '閸欐牗绉烽弨鎯版' : '閺€鎯版'}}閿涘苯缍嬮崜宥嗘暪閽樺繑鏆?{{favoriteCount}}">\n        <image src="{{isFavorite ? '/images/favorite-active.png' : '/images/favorite.png'}}" class="action-icon"></image>\n        <text class="action-text">{{isFavorite ? '瀹稿弶鏁归挊? : '閺€鎯版'}}</text>\n        <text class="action-count">{{favoriteCount}}</text>\n      </view>\n      <view class="action-item" bindtap="showCommentBox" aria-label="閺屻儳婀呯拠鍕啈閿涘苯缍嬮崜宥堢槑鐠佺儤鏆?{{commentList.length}}">\n        <image src="/images/comment.png" class="action-icon"></image>\n        <text class="action-text">鐠囧嫯顔?/text>\n        <text class="action-count">{{commentList.length}}</text>\n      </view>\n      <view class="action-item" open-type="share" aria-label="閸掑棔闊╅弬鍥╃彿">\n        <image src="/images/share.png" class="action-icon"></image>\n        <text class="action-text">閸掑棔闊?/text>\n      </view>\n    </view>\n\n    <!-- 鐠囧嫯顔戦崠鍝勭厵 -->\n    <view class="comment-section" wx:if="{{commentList.length > 0}}" aria-label="鐠囧嫯顔戦崚妤勩€?>\n      <view class="comment-header">\n        <text class="comment-title">鐠囧嫯顔?({{commentList.length}})</text>\n        <button class="more-comments" bindtap="loadMoreComments" wx:if="{{commentHasMore}}" size="mini">閺屻儳婀呴弴鏉戭樋</button>\n      </view>\n      <view class="comment-list">\n        <view class="comment-item" wx:for="{{commentList}}" wx:key="id" aria-label="{{item.username}} 閻ㄥ嫯鐦庣拋?>\n          <view class="comment-avatar">\n            <image src="{{item.avatar || '/images/default-avatar.png'}}" mode="aspectFill" aria-label="{{item.username}} 閻ㄥ嫬銇旈崓?></image>\n          </view>\n          <view class="comment-content">\n            <view class="comment-user-info">\n              <text class="comment-username">{{item.username}}</text>\n              <text class="comment-time">{{item.time}}</text>\n            </view>\n            <text class="comment-text">{{item.content}}</text>\n          <view class="comment-actions">\n            <view class="comment-action-item" bindtap="likeComment" data-id="{{item.id}}" aria-label="{{item.is_liked ? '閸欐牗绉烽悙纭呯' : '閻愮绂?}}鐠囧嫯顔?>\n              <image src="{{item.is_liked ? '/images/like-active.png' : '/images/like.png' }}" class="comment-action-icon"></image>\n              <text class="comment-action-text">{{item.like_count || 0}}</text>\n            </view>\n            <view class="comment-action-item" bindtap="replyToComment" data-id="{{item.id}}" data-username="{{item.username}}" aria-label="閸ョ偛顦?{{item.username}}">\n              <text class="comment-action-text">閸ョ偛顦?/text>\n            </view>\n          </view>\n          </view>\n        </view>\n        <!-- 閸旂姾娴囬弴鏉戭樋閹稿鎸?-->\n        <view class="load-more" wx:if="{{commentHasMore}}">\n          <button wx:if="{{!loadingComments}}" bindtap="loadMoreComments" class="load-more-btn">閸旂姾娴囬弴鏉戭樋</button>\n          <view wx:else class="loading-more">\n            <text>閸旂姾娴囨稉?..</text>\n          </view>\n        </view>\n        <view class="no-more" wx:if="{{!commentHasMore}}">\n          <text>濞屸剝婀侀弴鏉戭樋鐠囧嫯顔戞禍?/text>\n        </view>\n      </view>\n    </view>\n\n    <!-- 缁岄缚鐦庣拋鐑樺絹缁€?-->\n    <view class="empty-comments" wx:if="{{commentList.length === 0 && !loading}}" aria-label="閺嗗倹妫ょ拠鍕啈">\n      <image src="/images/empty-comments.png" class="empty-icon"></image>\n      <text class="empty-text">閺嗗倹妫ょ拠鍕啈閿涘苯鎻╅弶銉﹀濞屾瑥褰傞崥顫?/text>\n      <button class="empty-button" bindtap="showCommentBox">閸欐垼銆冪粭顑跨閺壜ょ槑鐠?/button>\n    </view>\n\n    <!-- 閻╃鍙ч幒銊ㄥ礃 -->\n    <view class="related-articles" wx:if="{{article.related_posts && article.related_posts.length > 0}}" aria-label="閻╃鍙ч幒銊ㄥ礃">\n      <view class="related-header">\n        <text class="related-title">閻╃鍙ч幒銊ㄥ礃</text>\n      </view>\n      <view class="related-list">\n        <view class="related-item" wx:for="{{article.related_posts}}" wx:key="id" data-id="{{item.id}}" bindtap="goToArticleDetail" aria-label="閺屻儳婀呴弬鍥╃彿 {{item.title || '閺傚洨鐝烽弽鍥暯'}}" data-uid="article-{{item.id}}">\n          <text class="related-title">{{item.title || '閺傚洨鐝烽弽鍥暯'}}</text>\n          <text class="related-info">{{item.date || '閺堫亞鐓￠弮鍫曟？'}} 璺?{{item.view_count || 0}}闂冨懓顕?/text>\n        </view>\n      </view>\n    </view>\n    <view class="related-articles" wx:else>\n      <view class="related-header">\n        <text class="related-title">閻╃鍙ч幒銊ㄥ礃</text>\n      </view>\n      <view class="no-articles">\n        閺嗗倹妫ら惄绋垮彠閹恒劏宕榎n      </view>\n    </view>\n  </view>\n\n  <!-- 鐠囧嫯顔戞潏鎾冲弳濡?-->\n  <view class="comment-input-container" wx:if="{{showCommentInput}}" aria-label="鐠囧嫯顔戞潏鎾冲弳濡?>\n    <input class="comment-input" value="{{commentContent}}" bindinput="onCommentInput" placeholder="鐠囧鍋ｆ禒鈧稊?.." confirm-type="send" bindconfirm="submitComment" focus="{{showCommentInput}}" maxlength="500"/>\n    <button class="comment-submit" bindtap="submitComment" disabled="{{!commentContent.trim()}}">閸欐垿鈧?/button>\n    <button class="comment-cancel" bindtap="hideCommentBox">閸欐牗绉?/button>\n  </view>\n\n  <!-- 妤犮劍鐏︾仦?-->\n  <view class="skeleton-container" wx:if="{{showSkeleton}}">\n    <view class="skeleton-title"></view>\n    <view class="skeleton-meta">\n      <view class="skeleton-author"></view>\n      <view class="skeleton-date"></view>\n      <view class="skeleton-views"></view>\n    </view>\n    <view class="skeleton-category"></view>\n    <view class="skeleton-content">\n      <view class="skeleton-paragraph"></view>\n      <view class="skeleton-paragraph"></view>\n      <view class="skeleton-paragraph"></view>\n      <view class="skeleton-paragraph"></view>\n      <view class="skeleton-paragraph"></view>\n    </view>\n  </view>\n</view>\n