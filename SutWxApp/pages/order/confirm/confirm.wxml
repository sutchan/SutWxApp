<!--\n文件名: confirm.wxml\n版本号: 1.0.0\n更新日期: 2025-11-27\n描述: 订单确认页面模板\n-->\n<view class="order-confirm">\n  <!-- 加载状态-->\n  <view wx:if="{{loading}}" class="loading-container">\n    <view class="loading"></view>\n    <text>{{i18n.translate('加载中)}}</text>\n  </view>\n\n  <!-- 产品信息 -->\n  <view class="section" wx:if="{{!loading && product}}">\n    <view class="section-title">{{i18n.translate('产品信息')}}</view>\n    <view class="product-item">\n      <image class="product-image" src="{{product.image}}" mode="aspectFill"></image>\n      <view class="product-info">\n        <text class="product-name">{{product.name}}</text>\n        <view class="product-specs" wx:for="{{product.specs}}" wx:key="*this">\n          <text class="spec-key">{{item[0]}}:</text>\n          <text class="spec-value">{{item[1]}}</text>\n        </view>\n        <view class="product-price">\n          <text class="price">¥{{product.price}}</text>\n          <text class="quantity">x{{quantity}}</text>\n        </view>\n      </view>\n    </view>\n  </view>\n\n  <!-- 收货地址 -->\n  <view class="section" bindtap="goToAddressSelection">\n    <view class="section-title">{{i18n.translate('收货地址')}}</view>\n    <view class="address-item" wx:if="{{address}}">\n      <view class="address-info">\n        <view class="address-header">\n          <text class="name">{{address.name}}</text>\n          <text class="phone">{{address.phone}}</text>\n        </view>\n        <text class="address-detail">{{address.province}}{{address.city}}{{address.district}}{{address.detail}}</text>\n      </view>\n      <image class="arrow" src="/images/arrow-right.svg" mode="aspectFit"></image>\n    </view>\n    <view class="no-address" wx:else>\n      <text>{{i18n.translate('璇烽€夋嫨收货地址')}}</text>\n      <image class="arrow" src="/images/arrow-right.svg" mode="aspectFit"></image>\n    </view>\n  </view>\n\n  <!-- 支付方式 -->\n  <view class="section">\n    <view class="section-title">{{i18n.translate('支付方式')}}</view>\n    <view class="payment-methods">\n      <view class="method-item" \n            wx:for="{{paymentMethods}}" \n            wx:key="id"\n            data-method="{{item.id}}"\n            bindtap="selectPaymentMethod"\n            class="{{paymentMethod === item.id ? 'selected' : ''}}">\n        <image class="method-icon" src="{{item.icon}}" mode="aspectFit"></image>\n        <text class="method-name">{{item.name}}</text>\n        <image class="check-icon" src="/images/check.svg" mode="aspectFit" wx:if="{{paymentMethod === item.id}}"></image>\n      </view>\n    </view>\n  </view>\n\n  <!-- 绉垎鎶垫墸 -->\n  <view class="section" wx:if="{{userPoints && userPoints.available > 0}}">\n    <view class="section-title">{{i18n.translate('绉垎鎶垫墸')}}</view>\n    <view class="points-deduction">\n      <view class="points-info">\n        <text>{{i18n.translate('鍙敤绉垎')}}</text>\n        <text class="points-available">{{userPoints.available}} {{i18n.translate('绉垎')}}</text>\n      </view>\n      <view class="points-control">\n        <view class="points-slider-container">\n          <slider \n            min="0" \n            max="{{maxDeductiblePoints}}" \n            value="{{deductionPoints}}" \n            bindchange="onPointsChange"\n            activeColor="#ff6b35"\n            backgroundColor="#e0e0e0"\n          />\n        </view>\n        <view class="points-input-container">\n          <text class="points-label">{{i18n.translate('浣跨敤绉垎')}}</text>\n          <input \n            type="number" \n            value="{{deductionPoints}}" \n            bindinput="onPointsInput"\n            min="0"\n            max="{{maxDeductiblePoints}}"\n            class="points-input"\n          />\n        </view>\n      </view>\n      <view class="deduction-amount">\n        <text>{{i18n.translate('鎶垫墸閲戦')}}</text>\n        <text class="amount">-¥{{deductionAmount}}</text>\n      </view>\n    </view>\n  </view>\n\n  <!-- 澶囨敞 -->\n  <view class="section">\n    <view class="section-title">{{i18n.translate('订单澶囨敞')}}</view>\n    <textarea \n      placeholder="{{i18n.translate('璇疯緭鍏ヨ鍗曞娉?)}}"\n      value="{{remark}}"\n      bindinput="updateRemark"\n      class="remark-input"\n      maxlength="200"\n    ></textarea>\n  </view>\n\n  <!-- 浠锋牸鏄庣粏 -->\n  <view class="section" wx:if="{{!loading && product}}">\n    <view class="section-title">{{i18n.translate('浠锋牸鏄庣粏')}}</view>\n    <view class="price-detail">\n      <view class="price-item">\n        <text>{{i18n.translate('鍟嗗搧閲戦')}}</text>\n        <text>¥{{totalAmount}}</text>\n      </view>\n      <view class="price-item">\n        <text>{{i18n.translate('杩愯垂')}}</text>\n        <text>¥{{shippingFee}}</text>\n      </view>\n      <view class="price-item" wx:if="{{deductionAmount > 0}}">\n        <text>{{i18n.translate('绉垎鎶垫墸')}}</text>\n        <text class="deduction">-¥{{deductionAmount}}</text>\n      </view>\n      <view class="price-item total">\n        <text class="total-label">{{i18n.translate('瀹炰粯閲戦')}}</text>\n        <text class="total-amount">¥{{finalAmount}}</text>\n      </view>\n    </view>\n  </view>\n\n  <!-- 鎻愪氦鎸夐挳 -->\n  <view class="submit-container" wx:if="{{!loading && product}}">\n    <view class="total-price">\n      <text>{{i18n.translate('瀹炰粯閲戦')}}锛?/text>\n      <text class="amount">¥{{finalAmount}}</text>\n    </view>\n    <button class="submit-btn" bindtap="submitOrder" type="primary" disabled="{{!address}}">\n      {{i18n.translate('鎻愪氦订单')}}\n    </button>\n  </view>\n</view>
