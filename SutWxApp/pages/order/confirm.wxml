锘?!-- 鐠併垹宕熺涵顔款吇妞ょ敻娼扮紒鎾寸€?-->
<view class="container">
  <!-- 閸︽澘娼冨Ο鈥虫健 -->
  <view class="address-section" bind:tap="onSelectAddress">
    <view class="address-content" wx:if="{{selectedAddress}}">
      <view class="address-header">
        <text class="name">{{selectedAddress.name}}</text>
        <text class="phone">{{selectedAddress.phone}}</text>
      </view>
      <view class="address-detail">
        <text>{{selectedAddress.province}}{{selectedAddress.city}}{{selectedAddress.district}}{{selectedAddress.detail}}</text>
      </view>
    </view>
    <view class="no-address" wx:else>
      <text>鐠囩兘鈧瀚ㄩ弨鎯版彛閸︽澘娼?/text>
    </view>
    <view class="arrow-right"></view>
  </view>
  
  <!-- 閸熷棗鎼ч崚妤勩€冨Ο鈥虫健 -->
  <view class="product-section">
    <view class="section-title">閸熷棗鎼ф穱鈩冧紖</view>
    
    <!-- 鐠愵厾澧挎潪锕€鏅㈤崫?-->
    <view class="product-item" wx:for="{{cartItems}}" wx:key="id" wx:for-item="item">
      <image class="product-image" src="{{item.image || '/images/default-post.svg'}}" mode="aspectFit"></image>
      <view class="product-info">
        <view class="product-title">{{item.title}}</view>
        <view class="product-sku" wx:if="{{item.skuName}}">{{item.skuName}}</view>
        <view class="product-price-quantity">
          <view class="product-price">妤納{item.price.toFixed(2)}}</view>
          <view class="product-quantity">x{{item.quantity}}</view>
        </view>
      </view>
    </view>
    
    <!-- 閻╁瓨甯寸拹顓濇嫳閻ㄥ嫬鏅㈤崫?-->
    <view class="product-item" wx:for="{{products}}" wx:key="id" wx:for-item="item">
      <image class="product-image" src="{{item.image || '/images/default-post.svg'}}" mode="aspectFit"></image>
      <view class="product-info">
        <view class="product-title">{{item.title}}</view>
        <view class="product-sku" wx:if="{{item.selectedSkuName}}">{{item.selectedSkuName}}</view>
        <view class="product-price-quantity">
          <view class="product-price">妤納{item.price.toFixed(2)}}</view>
          <view class="product-quantity">x{{item.quantity}}</view>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 娴兼ɑ鍎崚鍛娔侀崸?-->
  <view class="coupon-section" bind:tap="onSelectCoupon">
    <view class="coupon-label">娴兼ɑ鍎崚?/view>
    <view class="coupon-value">
      <text wx:if="{{coupon}}">{{coupon.name}}</text>
      <text class="placeholder" wx:else>鐠囩兘鈧瀚ㄦ导妯诲劕閸?/text>
    </view>
    <view class="arrow-right"></view>
  </view>
  
  <!-- 鐠併垹宕熸径鍥ㄦ暈濡€虫健 -->
  <view class="remark-section">
    <view class="remark-label">鐠併垹宕熸径鍥ㄦ暈</view>
    <input class="remark-input" placeholder="闁锝為敍宀冾嚞鏉堟挸鍙嗙拋銏犲礋婢跺洦鏁炴穱鈩冧紖" value="{{remark}}" bindinput="onRemarkInput" />
  </view>
  
  <!-- 娴犻攱鐗搁弰搴ｇ矎濡€虫健 -->
  <view class="price-section">
    <view class="price-item">
      <view class="price-label">閸熷棗鎼ч幀璁崇幆</view>
      <view class="price-value">妤納{totalPrice.toFixed(2)}}</view>
    </view>
    <view class="price-item">
      <view class="price-label">鏉╂劘鍨?/view>
      <view class="price-value" wx:if="{{shippingFee > 0}}">妤納{shippingFee.toFixed(2)}}</view>
      <view class="price-value free" wx:else>閸忓秷绻嶇拹?/view>
    </view>
    <view class="price-item" wx:if="{{discount > 0}}">
      <view class="price-label">娴兼ɑ鍎?/view>
      <view class="price-value discount">-妤納{discount.toFixed(2)}}</view>
    </view>
  </view>
  
  <!-- 鎼存洟鍎寸紒鎾剁暬閺?-->
  <view class="bottom-bar">
    <view class="total-price">
      <text class="price-label">閸氬牐顓搁敍?/text>
      <text class="price-value">妤納{finalPrice.toFixed(2)}}</text>
    </view>
    <button class="submit-btn" bind:tap="onSubmitOrder" loading="{{submitting}}" disabled="{{submitting}}">閹绘劒姘︾拋銏犲礋</button>
  </view>
</view>\n