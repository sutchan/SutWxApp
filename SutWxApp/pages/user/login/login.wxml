<!-- pages/user/login/login.wxml -->
<view class="login-container">
  <!-- 顶部Logo -->
  <view class="logo-container" aria-label="应用Logo和名称">
    <image src="/images/logo.png" class="logo" aria-label="应用Logo"></image>
    <text class="app-name">SUT微信小程序</text>
    <text class="app-slogan">连接校园，便捷生活</text>
  </view>

  <!-- 登录按钮区域 -->
  <view class="login-btn-container">
    <!-- 加载状态 -->
    <view class="loading" wx:if="{{isLoading}}" aria-label="登录中">
      <view class="loading-icon"></view>
      <text>登录中...</text>
    </view>

    <!-- 错误状态 -->
    <view class="error-message" wx:if="{{errorMessage}}" aria-label="错误提示">
      <text>{{errorMessage}}</text>
    </view>

    <!-- 主要登录按钮 -->
    <button wx:if="{{canIUseGetUserProfile && !isLoading}}" type="primary" class="login-btn" bindtap="getUserProfile" aria-label="微信一键登录">
      微信一键登录
    </button>

    <!-- 兼容旧版本的登录按钮 -->
    <button wx:elif="{{!isLoading}}" open-type="getUserInfo" bindgetuserinfo="bindGetUserInfo" type="primary" class="login-btn" aria-label="微信一键登录">
      微信一键登录
    </button>
  </view>

  <!-- 授权说明 -->
  <view class="auth-tips" aria-label="授权说明">
    <text>登录后可享受更多功能</text>
  </view>

  <!-- 授权功能列表 -->
  <view class="auth-features" wx:if="{{showFeatures}}" aria-label="授权后可使用的功能">
    <view class="feature-item">
      <image src="/images/features/article.png" class="feature-icon"></image>
      <text class="feature-text">浏览校园资讯</text>
    </view>
    <view class="feature-item">
      <image src="/images/features/signin.png" class="feature-icon"></image>
      <text class="feature-text">每日签到积分</text>
    </view>
    <view class="feature-item">
      <image src="/images/features/collection.png" class="feature-icon"></image>
      <text class="feature-text">收藏感兴趣的内容</text>
    </view>
  </view>

  <!-- 用户信息展示区域（仅用于演示，实际项目中不推荐这样使用） -->
  <view class="user-info-container" wx:if="{{canIUseOpenData}}" aria-hidden="true">
    <view class="user-info">
      <open-data type="userAvatarUrl"></open-data>
      <open-data type="userNickName"></open-data>
    </view>
  </view>

  <!-- 隐私政策同意复选框 -->
  <view class="privacy-checkbox" wx:if="{{requirePrivacyAgreement}}">
    <checkbox checked="{{privacyAgreed}}" bindtap="togglePrivacyAgreement" aria-label="同意隐私政策"></checkbox>
    <text>我已阅读并同意</text>
    <text class="link" bindtap="navigateToAgreement" data-type="privacy">《隐私政策》</text>
  </view>

  <!-- 服务条款和隐私政策 -->
  <view class="agreement-container" aria-label="协议说明">
    <text>登录即表示您同意</text>
    <text class="link" bindtap="navigateToAgreement" data-type="user">《用户协议》</text>
    <text>和</text>
    <text class="link" bindtap="navigateToAgreement" data-type="privacy">《隐私政策》</text>
  </view>

  <!-- 客服联系方式 -->
  <view class="customer-service">
    <text class="service-text" bindtap="contactService" aria-label="联系客服">遇到问题？联系客服</text>
  </view>

  <!-- 版本信息 -->
  <view class="version-info" wx:if="{{appVersion}}">
    <text class="version-text">版本 {{appVersion}}</text>
  </view>
</view>