/**
 * 鏂囦欢鍚? pointsDetail.wxml
 * 鐗堟湰鍙? 1.0.0
 * 鏇存柊鏃ユ湡: 2025-11-23
 * 鎻忚堪: pointsDetail 妞ょ敻娼扮紒鎾寸€弬鍥︽
 */
<view class="container">
  <!-- 瑜版挸澧犵粔顖氬瀻閸楋紕澧?-->
  <view class="points-card">
    <view class="points-info">
      <text class="points-label">瑜版挸澧犵粔顖氬瀻</text>
      <text class="points-value">{{currentPoints}}</text>
    </view>
    <view class="points-actions">
      <button class="action-btn" bindtap="onGoToTasks">鐠ф氨袧閸?/button>
      <button class="action-btn primary" bindtap="onGoToMall">閼鸿京袧閸?/button>
    </view>
  </view>

  <!-- 缁涙盯鈧灏崺?-->
  <view class="filter-section">
    <!-- 缁鐎风粵娑⑩偓?-->
    <view class="tab-bar">
      <view 
        wx:for="{{tabs}}" 
        wx:key="key" 
        class="tab-item {{activeTab === item.key ? 'active' : ''}}" 
        data-tab="{{item.key}}" 
        bindtap="onTabChange">
        {{item.label}}
      </view>
    </view>

    <!-- 閺冨爼妫跨粵娑⑩偓?-->
    <view class="time-filter">
      <view 
        wx:for="{{timeOptions}}" 
        wx:key="key" 
        class="time-item {{timeRange === item.key ? 'active' : ''}}" 
        data-time="{{item.key}}" 
        bindtap="onTimeFilterChange">
        {{item.label}}
      </view>
    </view>
  </view>

  <!-- 閸愬懎顔愰崠鍝勭厵 -->
  <view class="content">
    <!-- 缁夘垰鍨庨弰搴ｇ矎閸掓銆?-->
    <view class="detail-list" wx:if="{{!isEmpty}}">
      <view 
        wx:for="{{detailList}}" 
        wx:key="id" 
        class="detail-item" 
        data-id="{{item.id}}" 
        bindtap="onViewDetail">
        
        <!-- 閺勫海绮忛崶鐐垼 -->
        <view class="detail-icon {{item.type === 'earn' ? 'earn' : 'spend'}}">
          <text class="iconfont">{{item.type === 'earn' ? '+' : '-'}}</text>
        </view>
        
        <!-- 閺勫海绮忔穱鈩冧紖 -->
        <view class="detail-info">
          <view class="detail-title">{{item.title}}</view>
          <view class="detail-desc">{{item.description}}</view>
          <view class="detail-time">{{item.createTime}}</view>
        </view>
        
        <!-- 缁夘垰鍨庨崣妯哄 -->
        <view class="detail-points {{item.type === 'earn' ? 'earn' : 'spend'}}">
          {{item.type === 'earn' ? '+' : '-'}}{{item.points}}
        </view>
      </view>
    </view>

    <!-- 缁岃櫣濮搁幀?-->
    <view class="empty-state" wx:if="{{isEmpty}}">
      <image class="empty-icon" src="/images/empty-points.png" mode="aspectFit"></image>
      <text>閺嗗倹妫ょ粔顖氬瀻閺勫海绮?/text>
      <view class="empty-tip">鐎瑰本鍨氭禒璇插閹存牕寮稉搴㈡た閸斻劌褰查懢宄扮繁缁夘垰鍨?/view>
      <button class="empty-btn" bindtap="onGoToTasks">閸樻槒绂嬬粔顖氬瀻</button>
    </view>

    <!-- 鍔犺浇鐘舵€?->
    <view class="loading-state" wx:if="{{isLoading && detailList.length === 0}}">
      <view class="loading-spinner"></view>
      <text>鍔犺浇涓?.</text>
    </view>

    <!-- 濞屸剝婀侀弴鏉戭樋閺佺増宓?-->
    <view class="no-more-data" wx:if="{{!hasMore && detailList.length > 0}}">
      濞屸剝婀侀弴鏉戭樋閺佺増宓佹禍?    </view>
  </view>
</view>
