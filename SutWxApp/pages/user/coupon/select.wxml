<!-- 浼樻儬鍒搁€夋嫨椤甸潰缁撴瀯 -->
<view class="container">
  <!-- 椤甸潰鏍囬 -->
  <view class="page-header">
    <text class="page-title">閫夋嫨浼樻儬鍒?/text>
    <view class="close-btn" bind:tap="onNoUseCoupon">鍏抽棴</view>
  </view>

  <!-- 鎻愮ず淇℃伅 -->
  <view class="tip-section">
    <text class="tip-text">璇烽€夋嫨鍙娇鐢ㄧ殑浼樻儬鍒革紝鑻ヤ笉浣跨敤璇风偣鍑?涓嶄娇鐢ㄤ紭鎯犲埜"</text>
  </view>

  <!-- 鍔犺浇鐘舵€?-->
  <view class="loading-section" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">鍔犺浇浼樻儬鍒镐腑...</text>
  </view>

  <!-- 鏃犱紭鎯犲埜鎻愮ず -->
  <view class="empty-section" wx:elif="{{noCoupons}}">
    <view class="empty-icon"></view>
    <text class="empty-text">鏆傛棤鍙敤浼樻儬鍒?/text>
    <button class="empty-btn" bind:tap="onNoUseCoupon">涓嶄娇鐢ㄤ紭鎯犲埜</button>
  </view>

  <!-- 浼樻儬鍒稿垪琛?-->
  <view class="coupon-list" wx:else>
    <!-- 涓嶄娇鐢ㄤ紭鎯犲埜閫夐」 -->
    <view class="no-coupon-item" bind:tap="onNoUseCoupon">
      <view class="no-coupon-content">
        <view class="no-coupon-icon">鉁?/view>
        <view class="no-coupon-text">涓嶄娇鐢ㄤ紭鎯犲埜</view>
      </view>
      <radio class="coupon-radio" checked="{{!selectedCoupon}}"></radio>
    </view>

    <!-- 浼樻儬鍒稿垪琛?-->
    <view class="coupon-item" 
          wx:for="{{coupons}}" 
          wx:key="id" 
          bind:tap="onSelectCoupon"
          data-id="{{item.id}}">
      <!-- 浼樻儬鍒稿乏渚ч噾棰濆尯鍩?-->
      <view class="coupon-left">
        <text class="coupon-value">
          {{item.type === 'cash' ? '楼' : ''}}{{item.type === 'percent' ? (item.value/10) : item.value}}
          {{item.type === 'percent' ? '鎶? : ''}}
        </text>
        <text class="coupon-min-amount" wx:if="{{item.min_amount > 0}}">
          婊{item.min_amount}}鍏冨彲鐢?        </text>
      </view>

      <!-- 浼樻儬鍒稿彸渚т俊鎭尯鍩?-->
      <view class="coupon-right">
        <view class="coupon-name">{{item.name}}</view>
        <view class="coupon-description">{{item.description}}</view>
        <view class="coupon-expire">鏈夋晥鏈熻嚦锛歿{item.end_time ? (new Date(item.end_time).getFullYear() + '.' + (new Date(item.end_time).getMonth()+1).toString().padStart(2, '0') + '.' + new Date(item.end_time).getDate().toString().padStart(2, '0')) : ''}}</view>
      </view>

      <!-- 閫変腑鐘舵€?-->
      <radio class="coupon-radio" checked="{{selectedCoupon && selectedCoupon.id === item.id}}"></radio>
    </view>
  </view>

  <!-- 搴曢儴鎻愮ず -->
  <view class="bottom-tip" wx:if="{{coupons.length > 0}}">
    <text class="tip-text">* 姣忓紶璁㈠崟浠呴檺浣跨敤涓€寮犱紭鎯犲埜</text>
  </view>
</view>