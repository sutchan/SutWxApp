<!-- 浼樻儬鍒稿垪琛ㄩ〉闈㈡ā鏉?-->
<view class="coupon-list-page">
  <!-- 鏍囩鏍?-->
  <view class="tab-bar">
    <view 
      wx:for="{{tabs}}" 
      wx:key="key"
      class="tab-item {{activeTab === item.key ? 'active' : ''}}"
      data-key="{{item.key}}"
      bindtap="onTabChange"
    >
      {{item.name}}
    </view>
  </view>

  <!-- 鍔犺浇鐘舵€?-->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-icon"></view>
    <text class="loading-text">鍔犺浇涓?..</text>
  </view>

  <!-- 鏃犱紭鎯犲埜鎻愮ず -->
  <view class="empty-container" wx:if="{{!loading && noCoupons}}">
    <image class="empty-icon" src="../../../images/empty.svg" mode="aspectFit"></image>
    <text class="empty-text">鏆傛棤浼樻儬鍒?/text>
  </view>

  <!-- 浼樻儬鍒稿垪琛?-->
  <view class="coupon-list" wx:if="{{!loading && !noCoupons}}">
    <view 
      wx:for="{{coupons}}" 
      wx:key="id"
      class="coupon-item"
      bindtap="onViewCouponDetail"
      data-id="{{item.id}}"
    >
      <!-- 浼樻儬鍒稿唴瀹?-->
      <view class="coupon-content">
        <view class="coupon-left">
          <text class="coupon-value">{{formatCoupon(item).valueText}}</text>
          <text class="coupon-type">{{formatCoupon(item).typeText}}</text>
        </view>
        
        <view class="coupon-right">
          <view class="coupon-header">
            <text class="coupon-name">{{item.name}}</text>
            <text class="coupon-status" wx:if="{{activeTab !== 'available'}}">
              {{activeTab === 'used' ? '宸蹭娇鐢? : '宸茶繃鏈?}}
            </text>
          </view>
          
          <text class="coupon-desc">{{item.description}}</text>
          
          <view class="coupon-footer">
            <text class="coupon-condition">{{formatCoupon(item).conditionText}}</text>
            <text class="coupon-expire">鏈夋晥鏈熻嚦锛歿{formatCoupon(item).expireText}}</text>
          </view>
        </view>
      </view>
      
      <!-- 鍙充晶瑁呴グ -->
      <view class="coupon-border"></view>
    </view>
  </view>

  <!-- 宸蹭娇鐢ㄤ紭鎯犲埜棰濆淇℃伅 -->
  <view class="used-info" wx:if="{{item.status === 'used' && item.used_time}}">
    <text class="used-time">浣跨敤鏃堕棿锛歿{item.used_time}}</text>
    <text class="order-id">璁㈠崟鍙凤細{{item.order_id}}</text>
  </view>
</view>
\n