锘?!-- 缁夘垰鍨庨崯鍡楃厔閸熷棗鎼х拠锔藉剰妞ょ敻娼?-->
<view class="detail-container">
  <!-- 閸旂姾娴囬悩鑸碘偓?-->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-icon"></view>
    <text class="loading-text">閸旂姾娴囨稉?..</text>
  </view>

  <!-- 闁挎瑨顕ら幓鎰仛 -->
  <view class="error-container" wx:if="{{error}}">
    <view class="error-icon">閳跨媴绗?/view>
    <text class="error-text">{{error}}</text>
    <button class="retry-button" bindtap="onRetry">闁插秷鐦?/button>
  </view>

  <!-- 閸熷棗鎼х拠锔藉剰 -->
  <view class="product-content" wx:if="{{!loading && !error && product}}">
    <!-- 閸熷棗鎼ч崶鍓у -->
    <view class="product-image">
      <image src="{{product.image || '/assets/images/default-product.png'}}" mode="aspectFill"></image>
    </view>

    <!-- 閸熷棗鎼ч崺鐑樻拱娣団剝浼?-->
    <view class="product-info">
      <text class="product-title">{{product.title}}</text>
      <text class="product-description">{{product.description}}</text>
      
      <!-- 缁夘垰鍨庢禒閿嬬壐 -->
      <view class="price-section">
        <text class="price-label">閹碘偓闂団偓缁夘垰鍨?/text>
        <view class="price-container">
          <text class="price-value">{{product.points}}</text>
          <text class="price-unit">缁夘垰鍨?/text>
        </view>
      </view>

      <!-- 閸熷棗鎼х拠锔藉剰 -->
      <view class="detail-section">
        <view class="detail-item">
          <text class="detail-label">閸熷棗鎼х紓鏍у娇</text>
          <text class="detail-value">{{product.sku || 'N/A'}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">鎼存挸鐡ㄩ悩鑸碘偓?/text>
          <text class="detail-value">{{product.stock > 0 ? '閺堝鎻? : '缂傞缚鎻?}}</text>
        </view>
        <view class="detail-item" wx:if="{{product.stock > 0}}">
          <text class="detail-label">閸撯晙缍戞惔鎾崇摠</text>
          <text class="detail-value">{{product.stock}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">閸忔垶宕查梽鎰煑</text>
          <text class="detail-value">{{product.limitPerUser ? '濮ｅ繋姹夐梽鎰幀' + product.limitPerUser + '娴? : '閺冪娀妾洪崚?}}</text>
        </view>
      </view>

      <!-- 娴ｈ法鏁ょ拠瀛樻 -->
      <view class="usage-section" wx:if="{{product.usageInstructions}}">
        <text class="section-title">娴ｈ法鏁ょ拠瀛樻</text>
        <text class="usage-text">{{product.usageInstructions}}</text>
      </view>

      <!-- 閻劍鍩涚粔顖氬瀻娣団剝浼?-->
      <view class="user-points-section">
        <text class="user-points-label">閹存垹娈戠粔顖氬瀻</text>
        <text class="user-points-value">{{userPoints}}</text>
        <view class="points-actions">
          <text class="points-link" bindtap="navigateToPointsHistory">缁夘垰鍨庨弰搴ｇ矎</text>
          <text class="points-link" bindtap="navigateToPointsRules">缁夘垰鍨庣憴鍕灟</text>
        </view>
      </view>
    </view>
  </view>

  <!-- 鎼存洟鍎撮幙宥勭稊閺?-->
  <view class="bottom-bar" wx:if="{{!loading && !error && product}}">
    <view class="points-display">
      <text class="points-text">閸欘垳鏁ょ粔顖氬瀻: {{userPoints}}</text>
    </view>
    <button 
      class="exchange-button {{userPoints < product.points || product.stock <= 0 ? 'disabled' : ''}}" 
      bindtap="exchangeProduct"
      loading="{{exchangeLoading}}"
      disabled="{{userPoints < product.points || product.stock <= 0 || exchangeLoading}}"
    >
      {{userPoints < product.points ? '缁夘垰鍨庢稉宥堝喕' : (product.stock <= 0 ? '鎼存挸鐡ㄦ稉宥堝喕' : '缁斿宓嗛崗鎴炲床')}} - {{product.points}}缁夘垰鍨?    </button>
  </view>
</view>
\n