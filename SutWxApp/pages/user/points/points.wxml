/**
 * 文件名 points.wxml
 * 版本号 1.0.0
 * 更新日期: 2025-11-23
 * 描述: points 妞ょ敻娼扮紒鎾寸€弬鍥︽
 */
<!-- 缁夘垰鍨庢い鐢告桨 -->
<view class="points-container">
  <!-- 閻劍鍩涙穱鈩冧紖閸楋紕澧?-->
  <view class="user-card">
    <view class="user-info">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="nickname">{{userInfo.nickName}}</text>
        <text class="level">缁夘垰鍨庢导姘喅</text>
      </view>
    </view>
    
    <!-- 缁夘垰鍨庢穱鈩冧紖 -->
    <view class="points-info">
      <view class="points-main">
        <text class="points-value">{{pointsInfo.availablePoints}}</text>
        <text class="points-label">閸欘垳鏁ょ粔顖氬瀻</text>
      </view>
      
      <view class="points-stats">
        <view class="stat-item">
          <text class="stat-value">{{pointsInfo.todayEarned}}</text>
          <text class="stat-label">娴犲﹥妫╅懢宄扮繁</text>
        </view>
        <view class="stat-divider"></view>
        <view class="stat-item">
          <text class="stat-value">{{pointsInfo.todaySpent}}</text>
          <text class="stat-label">娴犲﹥妫╁☉鍫ｅ瀭</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 閸旂喕鍏橀崗銉ュ經 -->
  <view class="function-entries">
    <view class="entry-item" bindtap="goToPointsTasks">
      <view class="entry-icon tasks"></view>
      <text class="entry-text">缁夘垰鍨庢禒璇插</text>
    </view>
    
    <view class="entry-item" bindtap="goToPointsMall">
      <view class="entry-icon mall"></view>
      <text class="entry-text">缁夘垰鍨庨崯鍡楃厔</text>
    </view>
    
    <view class="entry-item" bindtap="goToPointsSignin">
      <view class="entry-icon signin"></view>
      <text class="entry-text">濮ｅ繑妫╃粵鎯у煂</text>
    </view>
    
    <view class="entry-item" bindtap="goToPointsRules">
      <view class="entry-icon rules"></view>
      <text class="entry-text">缁夘垰鍨庣憴鍕灟</text>
    </view>
  </view>
  
  <!-- 缁夘垰鍨庣拋鏉跨秿 -->
  <view class="points-records">
    <view class="section-header">
      <text class="section-title">缁夘垰鍨庣拋鏉跨秿</text>
      <text class="section-more" bindtap="goToPointsExchangeRecords">閺屻儳婀呴崗銊╁劥</text>
    </view>
    
    <!-- 加载状态->
    <view wx:if="{{loading && pointsRecords.length === 0}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">濮濓絽婀崝鐘烘祰缁夘垰鍨庣拋鏉跨秿...</text>
    </view>
    
    <!-- 缁夘垰鍨庣拋鏉跨秿閸掓銆?-->
    <view wx:else class="records-list">
      <view wx:for="{{pointsRecords}}" wx:key="id" class="record-item">
        <view class="record-icon {{item.type}}">
          <text wx:if="{{item.type === 'earn'}}" class="iconfont icon-plus"></text>
          <text wx:elif="{{item.type === 'spend'}}" class="iconfont icon-minus"></text>
        </view>
        
        <view class="record-info">
          <view class="record-title">{{item.reason}}</view>
          <view class="record-time">{{formatTime(item.createTime)}}</view>
          <view wx:if="{{item.orderNo}}" class="record-order">璁㈠崟閸欏嚖绱皗{item.orderNo}}</view>
        </view>
        
        <view class="record-amount {{item.type}}">
          {{formatPointsChange(item.amount)}}
        </view>
      </view>
      
      <!-- 閸旂姾娴囬弴鏉戭樋 -->
      <view wx:if="{{hasMore && loading}}" class="loading-more">
        <view class="loading-spinner small"></view>
        <text class="loading-text">閸旂姾娴囬弴鏉戭樋...</text>
      </view>
      
      <!-- 濞屸剝婀侀弴鏉戭樋閺佺増宓?-->
      <view wx:if="{{!hasMore && pointsRecords.length > 0}}" class="no-more">
        <text>濞屸剝婀侀弴鏉戭樋鐠佹澘缍嶆禍?/text>
      </view>
      
      <!-- 缁岃櫣濮搁幀?-->
      <view wx:if="{{pointsRecords.length === 0 && !loading}}" class="empty-state">
        <view class="empty-icon"></view>
        <text class="empty-text">閺嗗倹妫ょ粔顖氬瀻鐠佹澘缍?/text>
        <text class="empty-desc">鐎瑰本鍨氭禒璇插閹存牞鍠橀悧鈺佸讲閼惧嘲绶辩粔顖氬瀻</text>
      </view>
    </view>
  </view>
</view>
